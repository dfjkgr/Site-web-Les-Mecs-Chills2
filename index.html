<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Les Mecs Chills â€” Hub Complet</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
:root{ --bg:#0b0f14; --card:#0f1620; --muted:#9fb0c8; --accent1:#8e61ff; --accent2:#4fb3ff; --success:#43b581; --danger:#ff6b6b; --glass:rgba(255,255,255,0.03); --radius:12px; --trans:all .22s ease; --text:#eaf2ff; }
*{box-sizing:border-box}
body{margin:0;font-family:'Poppins',system-ui,Arial;background:linear-gradient(120deg,#071126,#08121a);color:var(--text);-webkit-font-smoothing:antialiased;padding-top:72px}
.nav{position:fixed;top:0;left:0;right:0;height:72px;display:flex;align-items:center;justify-content:space-between;padding:10px 22px;background:rgba(6,8,12,0.75);backdrop-filter: blur(6px);z-index:1000}
.logo{display:flex;gap:12px;align-items:center}
.logo .badge{width:46px;height:46px;border-radius:10px;background:linear-gradient(135deg,var(--accent1),var(--accent2));display:flex;align-items:center;justify-content:center;font-weight:800}
.menu{display:flex;gap:10px;align-items:center}
.menu a{padding:8px 12px;border-radius:8px;color:var(--muted);text-decoration:none;font-weight:600}
.menu a:hover{color:#fff;box-shadow:0 6px 24px rgba(79,179,255,0.06)}
.container{max-width:1150px;margin:24px auto;padding:0 20px}
.hero{display:flex;gap:20px;align-items:center;background:linear-gradient(180deg, rgba(143,86,255,0.06), rgba(79,179,255,0.02));padding:28px;border-radius:14px;box-shadow:0 8px 30px rgba(0,0,0,0.6)}
.hero-left{flex:1}
h1{font-size:34px;margin:0 0 8px}
.lead{color:var(--muted);margin:0 0 16px}
.btn{display:inline-block;padding:10px 16px;border-radius:999px;background:linear-gradient(90deg,var(--accent2),var(--accent1));color:#071126;font-weight:700;text-decoration:none;box-shadow:0 10px 30px rgba(123,97,255,0.12)}
.card{background:var(--card);padding:14px;border-radius:12px;box-shadow:0 8px 20px rgba(0,0,0,0.5)}
.section{margin-top:18px}
.cols{display:grid;grid-template-columns:1fr 360px;gap:18px;align-items:start}
@media(max-width:980px){.cols{grid-template-columns:1fr}}
.field{margin-bottom:10px}
label{display:block;color:var(--muted);font-size:13px;margin-bottom:6px}
input[type="text"],input[type="number"],input[type="password"],select,textarea{width:100%;padding:10px;border-radius:8px;background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.03);color:var(--text);outline:none}
textarea{min-height:90px;resize:vertical}
.small{font-size:13px;color:var(--muted)}
.list{display:flex;flex-direction:column;gap:10px}
.item{background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);padding:12px;border-radius:10px;display:flex;justify-content:space-between;gap:12px}
.tab{padding:8px 10px;border-radius:8px;background:transparent;color:var(--muted);cursor:pointer}
.tab.active{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#071126;font-weight:700}
.choice{display:block;padding:8px;border-radius:8px;margin:6px 0;border:1px solid rgba(255,255,255,0.03);cursor:pointer}
.hidden{display:none!important}
.footer{padding:20px;text-align:center;color:var(--muted);font-size:13px}
.badge{display:inline-block;padding:6px 8px;border-radius:8px;background:rgba(255,255,255,0.03);font-weight:700}
.small-muted{color:var(--muted)}
.admin-area{background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);padding:12px;border-radius:10px}
.btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:8px 10px;border-radius:8px;color:var(--muted)}
</style>
</head>
<body>
<header class="nav">
Â  <div class="logo">
Â  Â  <div class="badge">LMC</div>
Â  Â  <div>
Â  Â  Â  <div style="font-weight:800">Les Mecs Chills</div>
Â  Â  Â  <div class="small">Serveur Discord â€¢ Hub communautaire</div>
Â  Â  </div>
Â  </div>
Â  <nav class="menu" aria-label="Main">
Â  Â  <a href="#home">Accueil</a>
Â  Â  <a href="#about">Ã€ propos</a>
Â  Â  <a href="#brawl">Brawl Stars</a>
Â  Â  <a href="#roles-section">RÃ´les</a>
Â  Â  <a href="#events">Ã‰vÃ©nements</a>
Â  Â  <a href="#community">CommunautÃ©</a>
Â  Â  <a href="#games">Jeux</a>
Â  Â  <a href="#contact">Contact</a>
Â  Â  <a href="#help-section">Aide</a>
Â  Â  <a href="#admin-section" id="navAdmin">Admin</a>
Â  </nav>
</header>
<main class="container">
Â  <section id="home" class="hero">
Â  Â  <div class="hero-left">
Â  Â  Â  <h1>JUSTE DES MECS CHILLS EN FAIT !</h1>
Â  Â  Â  <p class="lead">Rejoins notre serveur Discord pour des tournois, quiz, mini-jeux et une ambiance chill. Clique pour rejoindre ou explore le site pour postuler et demander des rÃ´les.</p>
Â  Â  Â  <div style="display:flex;gap:8px;align-items:center">
Â  Â  Â  Â  <a class="btn" href="https://discord.gg/wUtq5ZA9Kt" target="_blank" rel="noopener">Rejoindre le serveur</a>
Â  Â  Â  Â  <button id="btnOpenGames" class="btn" style="background:transparent;border:1px solid rgba(255,255,255,0.06)">Ouvrir jeux</button>
Â  Â  Â  </div>
Â  Â  </div>
Â  Â  <div style="width:340px;display:flex;flex-direction:column;gap:12px">
Â  Â  Â  <div class="card">
Â  Â  Â  Â  <div style="font-weight:700">Prochains Ã©vÃ©nements</div>
Â  Â  Â  Â  <div class="small" style="margin-top:6px">Tournoi Brawl â€” Dimanche 20h</div>
Â  Â  Â  </div>
Â  Â  Â  <div class="card">
Â  Â  Â  Â  <div style="font-weight:700">RÃ´les VIP</div>
Â  Â  Â  Â  <div class="small" style="margin-top:6px">AccÃ¨s salon VIP & avantages</div>
Â  Â  Â  </div>
Â  Â  </div>
Â  </section>

Â  <section id="about" class="section">
Â  Â  <div class="card">
Â  Â  Â  <h2>Ã€ propos</h2>
Â  Â  Â  <p class="small">Notre serveur Discord est un espace oÃ¹ rÃ¨gnent la bonne humeur, le respect et l'amitiÃ©. Chaque membre compte et a son rÃ´le Ã  jouer dans la communautÃ©.</p>
Â  Â  </div>
Â  </section>

Â  <section id="brawl" class="section">
Â  Â  <div class="card">
Â  Â  Â  <h2>Brawl Stars</h2>
Â  Â  Â  <p class="small">Une catÃ©gorie dÃ©diÃ©e avec salons stratÃ©giques, clips, tournois et plus encore.</p>
Â  Â  </div>
Â  </section>

Â  <section id="roles-section" class="section">
Â  Â  <div class="card cols">
Â  Â  Â  <div>
Â  Â  Â  Â  <h2>RÃ´les & Demandes</h2>
Â  Â  Â  Â  <p class="small">RÃ´les dynamiques et demandes rapides.</p>
Â  Â  Â  Â  <div style="margin-top:12px" id="quickRoleCard">
Â  Â  Â  Â  Â  <strong>Demande rapide</strong>
Â  Â  Â  Â  Â  <div class="field"><label>Pseudo</label><input id="rq_pseudo" type="text" placeholder="Ex: ChillUser#1234"></div>
Â  Â  Â  Â  Â  <div class="field"><label>RÃ´le</label>
Â  Â  Â  Â  Â  Â  <select id="rq_role"><option value="">-- Choisir --</option><option value="ModÃ©rateur">ModÃ©rateur</option><option value="Journaliste">Journaliste</option></select></div>
Â  Â  Â  Â  Â  <div style="margin-top:10px"><button class="btn" id="rq_submit">Demander (rapide)</button></div>
Â  Â  Â  Â  Â  <div id="rq_msg" class="small-muted" style="margin-top:8px"></div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div style="margin-top:18px" id="fullAppCard">
Â  Â  Â  Â  Â  <strong>Candidature complÃ¨te</strong>
Â  Â  Â  Â  Â  <form id="fullAppForm">
Â  Â  Â  Â  Â  Â  <div class="field"><label>Pseudo Discord</label><input id="fa_pseudo" type="text" placeholder="Ex: ChillUser#1234" required></div>
Â  Â  Â  Â  Â  Â  <div class="field"><label>Ã‚ge</label><input id="fa_age" type="number" min="13" placeholder="Ã‚ge"></div>
Â  Â  Â  Â  Â  Â  <div class="field"><label>ExpÃ©rience</label><input id="fa_experience" type="text" placeholder="ExpÃ©rience sur Discord"></div>
Â  Â  Â  Â  Â  Â  <div class="field"><label>DisponibilitÃ© (h / semaine)</label><input id="fa_hours" type="number" min="0" placeholder="Ex: 10"></div>
Â  Â  Â  Â  Â  Â  <div class="field"><label>Lettre de motivation</label><textarea id="fa_motivation" maxlength="2000" placeholder="Pourquoi tu veux rejoindre le staff ?"></textarea></div>
Â  Â  Â  Â  Â  Â  <div style="display:flex;gap:10px;align-items:center"><button id="fullAppSubmit" class="btn">Envoyer la candidature</button><div id="fullAppMsg" class="small-muted"></div></div>
Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>

Â  Â  Â  <aside>
Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  <strong>RÃ´les en rotation</strong>
Â  Â  Â  Â  Â  <div id="rolesList" style="margin-top:8px" class="small-muted">Aucun rÃ´le</div>
Â  Â  Â  Â  Â  <button id="createDemoRole" class="btn-ghost" style="margin-top:8px">CrÃ©er rÃ´le dÃ©mo</button>
Â  Â  Â  Â  </div>
Â  Â  Â  </aside>
Â  Â  </div>
Â  </section>

Â  <section id="events" class="section">
Â  Â  <div class="card">
Â  Â  Â  <h2>Ã‰vÃ©nements</h2>
Â  Â  Â  <p class="small">Tournois hebdo, soirÃ©es chill, concours crÃ©a.</p>
Â  Â  </div>
Â  </section>

Â  <section id="community" class="section">
Â  Â  <div class="card">
Â  Â  Â  <h2>CommunautÃ©</h2>
Â  Â  Â  <p class="small">Partage, entraide et fun !</p>
Â  Â  </div>
Â  </section>

Â  <section id="games" class="section">
Â  Â  <div class="card cols">
Â  Â  Â  <div>
Â  Â  Â  Â  <h2>Jeux & Quiz</h2>
Â  Â  Â  Â  <div class="card" style="margin-top:8px;padding:12px">
Â  Â  Â  Â  Â  <strong>Saisis ton pseudo pour jouer</strong>
Â  Â  Â  Â  Â  <div style="margin-top:8px"><input id="playerPseudo" placeholder="Ex: ChillPlayer#1234"></div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="card" style="margin-top:12px;padding:12px" id="quizCard">
Â  Â  Â  Â  Â  <h3>Quiz Culture GÃ©nÃ©rale</h3>
Â  Â  Â  Â  Â  <div id="quizContainer">Chargement quiz...</div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="card" style="margin-top:12px;padding:12px">
Â  Â  Â  Â  Â  <h3>Devine le chiffre (1-20)</h3>
Â  Â  Â  Â  Â  <div style="display:flex;gap:8px"><input id="guess_input" type="number" min="1" max="20" placeholder="1-20"><button id="guess_btn" class="btn">Valider</button></div>
Â  Â  Â  Â  Â  <div id="guess_feedback" class="small-muted" style="margin-top:8px"></div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="card" style="margin-top:12px;padding:12px">
Â  Â  Â  Â  Â  <h3>Pierre / Feuille / Ciseaux</h3>
Â  Â  Â  Â  Â  <div style="display:flex;gap:8px"><button class="btn" data-rps="rock">Pierre</button><button class="btn" data-rps="paper">Feuille</button><button class="btn" data-rps="scissors">Ciseaux</button></div>
Â  Â  Â  Â  Â  <div id="rps_feedback" class="small-muted" style="margin-top:8px"></div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="card" style="margin-top:12px;padding:12px">
Â  Â  Â  Â  Â  <h3>Dice Roll</h3>
Â  Â  Â  Â  Â  <div style="display:flex;gap:8px"><button id="rollDiceBtn" class="btn">Lancer le dÃ©</button><div id="diceRes" class="small-muted"></div></div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="card" style="margin-top:12px;padding:12px">
Â  Â  Â  Â  Â  <h3>Memory Mini</h3>
Â  Â  Â  Â  Â  <div id="memoryArea"></div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="card" style="margin-top:12px;padding:12px">
Â  Â  Â  Â  Â  <h3>Flag Quiz</h3>
Â  Â  Â  Â  Â  <div id="flagArea"></div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="card" style="margin-top:12px;padding:12px">
Â  Â  Â  Â  Â  <h3>Scramble Word</h3>
Â  Â  Â  Â  Â  <div style="display:flex;gap:8px"><div id="scrambleWord" class="small-muted"></div><input id="scrambleGuess" placeholder="ton essai"><button id="scrambleBtn" class="btn">Valider</button></div>
Â  Â  Â  Â  Â  <div id="scrambleRes" class="small-muted" style="margin-top:8px"></div>
Â  Â  Â  Â  </div>

Â  Â  Â  </div>

Â  Â  Â  <aside>
Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  <strong>Leaderboard</strong>
Â  Â  Â  Â  Â  <div id="leaderboard" style="margin-top:10px" class="small-muted">Aucun score</div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="card" style="margin-top:12px">
Â  Â  Â  Â  Â  <strong>Badges</strong>
Â  Â  Â  Â  Â  <div id="badges" style="margin-top:8px" class="small-muted">Aucun badge</div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="card" style="margin-top:12px">
Â  Â  Â  Â  Â  <strong>Charger 3D</strong>
Â  Â  Â  Â  Â  <div style="margin-top:8px"><button id="load3d" class="btn">Charger dÃ©mo 3D</button></div>
Â  Â  Â  Â  Â  <div id="threeDContainer" style="margin-top:8px"></div>
Â  Â  Â  Â  </div>
Â  Â  Â  </aside>
Â  Â  </div>
Â  </section>

Â  <section id="contact" class="section">
Â  Â  <div class="card cols">
Â  Â  Â  <div>
Â  Â  Â  Â  <h2>Contact / Suggestions</h2>
Â  Â  Â  Â  <p class="small">Laisse une suggestion â€” elle sera visible par l'admin.</p>
Â  Â  Â  Â  <div style="margin-top:10px"><input id="suggest_pseudo" placeholder="Pseudo (optionnel)"><textarea id="suggest_text" placeholder="Ta suggestion" style="margin-top:8px"></textarea><div style="margin-top:8px"><button id="suggest_send" class="btn">Envoyer suggestion</button></div><div id="suggest_msg" class="small-muted" style="margin-top:8px"></div></div>
Â  Â  Â  </div>
Â  Â  Â  <aside>
Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  <strong>Suggestions rÃ©centes</strong>
Â  Â  Â  Â  Â  <div id="recentSuggestions" class="small-muted" style="margin-top:10px">Aucune</div>
Â  Â  Â  Â  </div>
Â  Â  Â  </aside>
Â  Â  </div>
Â  </section>

Â  <section id="help-section" class="section">
Â  Â  <div class="card cols">
Â  Â  Â  <div>
Â  Â  Â  Â  <h2>Aide du site</h2>
Â  Â  Â  Â  <p class="small">Si tu as besoin d'aide, signale-le ici â€” l'admin rÃ©pondra publiquement dans la section Informations Aide.</p>
Â  Â  Â  Â  <div style="margin-top:10px"><input id="helpPseudo" placeholder="Pseudo (optionnel)"><textarea id="helpQuestion" placeholder="Ta question / problÃ¨me" style="margin-top:8px"></textarea><div style="margin-top:8px"><button id="helpSend" class="btn">Envoyer demande d'aide</button></div><div id="helpMsg" class="small-muted" style="margin-top:8px"></div></div>
Â  Â  Â  </div>
Â  Â  Â  <aside>
Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  <strong>Informations / Aide</strong>
Â  Â  Â  Â  Â  <div id="helpAnswers" style="margin-top:10px" class="small-muted">Aucune</div>
Â  Â  Â  Â  </div>
Â  Â  Â  </aside>
Â  Â  </div>
Â  </section>

Â  <section id="admin-section" class="section">
Â  Â  <div class="card">
Â  Â  Â  <h2>Panneau Admin</h2>
Â  Â  Â  <div id="adminAuth">
Â  Â  Â  Â  <div style="display:flex;gap:8px;align-items:center"><input id="adminPassInput" type="password" placeholder="Mot de passe admin"><button id="adminLoginBtn" class="btn">Se connecter</button><div id="adminAuthMsg" class="small-muted"></div></div>
Â  Â  Â  </div>

Â  Â  Â  <div id="adminDashboard" class="hidden" style="margin-top:12px">
Â  Â  Â  Â  <div style="display:flex;gap:10px;align-items:center;justify-content:space-between;flex-wrap:wrap">
Â  Â  Â  Â  Â  <div class="tabs" role="tablist">
Â  Â  Â  Â  Â  Â  <div class="tab active" data-tab="suggestionsTab">Suggestions</div>
Â  Â  Â  Â  Â  Â  <div class="tab" data-tab="quickappsTab">Quick-Apps</div>
Â  Â  Â  Â  Â  Â  <div class="tab" data-tab="applicationsTab">Applications</div>
Â  Â  Â  Â  Â  Â  <div class="tab" data-tab="rolesTab">Roles</div>
Â  Â  Â  Â  Â  Â  <div class="tab" data-tab="helpTab">Aide</div>
Â  Â  Â  Â  Â  Â  <div class="tab" data-tab="auditTab">Audit</div>
Â  Â  Â  Â  Â  Â  <div class="tab" data-tab="meetingTab">RÃ©union</div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div style="display:flex;gap:8px"><button id="adminExport" class="btn">Exporter JSON</button><button id="adminClearAll" class="btn" style="background:var(--danger)">Tout effacer</button></div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div id="adminTabContent" style="margin-top:12px">
Â  Â  Â  Â  Â  <div id="suggestionsTab" class="list"></div>
Â  Â  Â  Â  Â  <div id="quickappsTab" class="list hidden"></div>
Â  Â  Â  Â  Â  <div id="applicationsTab" class="list hidden"></div>
Â  Â  Â  Â  Â  <div id="rolesTab" class="list hidden"></div>
Â  Â  Â  Â  Â  <div id="helpTab" class="list hidden"></div>
Â  Â  Â  Â  Â  <div id="auditTab" class="list hidden"></div>
Â  Â  Â  Â  Â  <div id="meetingTab" class="list hidden"></div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div style="margin-top:12px;display:flex;gap:8px;align-items:center;flex-wrap:wrap">
Â  Â  Â  Â  Â  <input id="awardPseudo" placeholder="Pseudo"><input id="awardPoints" type="number" placeholder="Points"><button id="awardBtn" class="btn">Attribuer points</button>
Â  Â  Â  Â  Â  <input id="awardBadgeName" placeholder="Nom du badge"><button id="awardBadgeBtn" class="btn">Attribuer badge</button>
Â  Â  Â  Â  </div>

Â  Â  Â  </div>
Â  Â  </div>
Â  </section>

Â  <footer class="footer">Â© Les Mecs Chills â€” DonnÃ©es en local (localStorage)</footer>
</main>

<script>
// ----------------- Helpers localStorage & audit -----------------
function lmc_get(key, def){ try{ const r = localStorage.getItem(key); return r ? JSON.parse(r) : def; }catch(e){console.error(e); return def;} }
function lmc_set(key, value){ try{ localStorage.setItem(key, JSON.stringify(value)); return true; }catch(e){console.error(e); return false;} }
function auditLog(type,message){ const a = lmc_get('lmc_audit',[]); a.unshift({time:new Date().toISOString(),type,message}); lmc_set('lmc_audit', a.slice(0,200)); }

// Ensure keys
(function init(){ lmc_get('lmc_suggestions',[]); lmc_get('lmc_quick_apps',[]); lmc_get('lmc_applications',[]); lmc_get('lmc_roles',[]); lmc_get('lmc_quiz_scores',[]); lmc_get('lmc_gameResults',[]); lmc_get('lmc_helpRequests',[]); lmc_get('lmc_meetingBoard',[]); lmc_get('lmc_ai_saved',[]); lmc_get('lmc_announcements',[]); })();

// ----------------- Member stats & badges stored in lmc_ai_saved -----------------
function getMemberStats(){ const saved = lmc_get('lmc_ai_saved',[]); let s = saved.find(x=>x && x.type==='member_stats'); if(!s){ s = {type:'member_stats',map:{}}; saved.unshift(s); lmc_set('lmc_ai_saved', saved); } return s.map; }
function saveMemberStats(map){ const saved = lmc_get('lmc_ai_saved',[]); const idx = saved.findIndex(x=>x && x.type==='member_stats'); const obj = {type:'member_stats',map}; if(idx>=0) saved[idx]=obj; else saved.unshift(obj); lmc_set('lmc_ai_saved', saved); }
function addPoints(pseudo, pts){ if(!pseudo) pseudo='anonymous'; const map = getMemberStats(); if(!map[pseudo]) map[pseudo]={points:0,badges:[]}; map[pseudo].points = (map[pseudo].points||0)+pts; // auto badges
Â if(map[pseudo].points>=100 && !map[pseudo].badges.includes('Legend Chill')) map[pseudo].badges.push('Legend Chill');
Â if(map[pseudo].points>=50 && !map[pseudo].badges.includes('Pro Chill')) map[pseudo].badges.push('Pro Chill');
Â if(map[pseudo].points>=10 && !map[pseudo].badges.includes('Rookie Chill')) map[pseudo].badges.push('Rookie Chill');
Â saveMemberStats(map); auditLog('points', `+${pts} pts -> ${pseudo}`); renderLeaderboard(); renderBadges(); }
function awardBadge(pseudo,badge){ if(!pseudo) pseudo='anonymous'; const map=getMemberStats(); if(!map[pseudo]) map[pseudo]={points:0,badges:[]}; if(!map[pseudo].badges.includes(badge)) map[pseudo].badges.push(badge); saveMemberStats(map); auditLog('badge', `${badge} -> ${pseudo}`); renderBadges(); }

// ----------------- Render leaderboard & badges -----------------
function renderLeaderboard(){ const map = getMemberStats(); const arr = Object.keys(map).map(k=>({pseudo:k,points:map[k].points||0})).sort((a,b)=>b.points-a.points); const el = document.getElementById('leaderboard'); el.innerHTML = arr.length ? arr.slice(0,10).map((x,i)=>`${i+1}. <b>${escapeHTML(x.pseudo)}</b> â€” ${x.points} pts`).join('<br>') : 'Aucun score'; }
function renderBadges(){ const map=getMemberStats(); const badges = Object.keys(map).flatMap(k => (map[k].badges||[]).map(b=>({pseudo:k,badge:b}))); const el=document.getElementById('badges'); el.innerHTML = badges.length ? badges.slice(0,12).map(x=>`${escapeHTML(x.pseudo)} â€¢ ${escapeHTML(x.badge)}`).join('<br>') : 'Aucun badge'; }

// ----------------- Utility -----------------
function escapeHTML(s){ if(!s && s!==0) return ''; return String(s).replace(/[&<>\"']/g, ch=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[ch])); }

// ----------------- Suggestions -----------------
function renderRecentSuggestions(){ const list = lmc_get('lmc_suggestions',[]); document.getElementById('recentSuggestions').innerHTML = list.length ? list.slice(0,6).map(s=>escapeHTML(s.pseudo? `${s.pseudo}: ${s.text}`: s)).join('<br>') : 'Aucune'; }
document.getElementById('suggest_send').addEventListener('click', ()=>{ const pseudo=document.getElementById('suggest_pseudo').value.trim(); const text=document.getElementById('suggest_text').value.trim(); if(!text){ document.getElementById('suggest_msg').textContent='Suggestion vide'; return; } const arr=lmc_get('lmc_suggestions',[]); arr.unshift({pseudo: pseudo||'Anon', text, date:new Date().toISOString()}); lmc_set('lmc_suggestions', arr); auditLog('suggestion', `${pseudo||'Anon'}: ${text.slice(0,80)}`); addPoints(pseudo||'Anon',3); document.getElementById('suggest_msg').textContent='Suggestion envoyÃ©e'; document.getElementById('suggest_pseudo').value=''; document.getElementById('suggest_text').value=''; renderRecentSuggestions(); renderAdminSuggestions(); });

function renderAdminSuggestions(){ const arr=lmc_get('lmc_suggestions',[]); const el=document.getElementById('suggestionsTab'); if(!arr.length){ el.innerHTML='<div class="item">Aucune suggestion</div>'; return; } el.innerHTML = arr.map((s,i)=>`<div class="item"><div><b>${escapeHTML(s.pseudo)}</b><div class="meta">${escapeHTML(s.text)}</div><div class="meta">${new Date(s.date).toLocaleString()}</div></div><div style="display:flex;flex-direction:column;gap:6px"><button onclick="adminDeleteSuggestion(${i})">Suppr</button></div></div>`).join(''); }
function adminDeleteSuggestion(i){ const arr=lmc_get('lmc_suggestions',[]); arr.splice(i,1); lmc_set('lmc_suggestions',arr); auditLog('admin','Suggestion supprimÃ©e'); renderAdminSuggestions(); renderRecentSuggestions(); }

// ----------------- Quick Apps & Applications -----------------
function renderQuickApps(){ const arr=lmc_get('lmc_quick_apps',[]); const el=document.getElementById('quickappsTab'); if(!arr.length){ el.innerHTML='<div class="item">Aucune postulation rapide</div>'; return; } el.innerHTML = arr.map((q,i)=>`<div class="item"><div><b>${escapeHTML(q.pseudo)}</b><div class="meta">${escapeHTML(q.role||q.message||'--')}</div><div class="meta">${new Date(q.date).toLocaleString()}</div></div><div style="display:flex;flex-direction:column;gap:6px"><button onclick="adminHandleQuick(${i})">Traiter</button><button onclick="adminDelQuick(${i})" style="background:var(--danger);color:#fff">Suppr</button></div></div>`).join(''); }
function renderApplications(){ const arr=lmc_get('lmc_applications',[]); const el=document.getElementById('applicationsTab'); if(!arr.length){ el.innerHTML='<div class="item">Aucune candidature</div>'; return; } el.innerHTML = arr.map((a,i)=>`<div class="item" style="flex-direction:column;align-items:flex-start"><div><b>${escapeHTML(a.pseudo||a.discord||'Anon')}</b> â€¢ ${escapeHTML(a.age||'n/a')} ans â€¢ dispo: ${escapeHTML(a.hours||'n/a')}h</div><div class="meta" style="margin-top:8px">Exp: ${escapeHTML(a.experience||'--')}</div><div class="meta" style="margin-top:8px">Motivation: ${escapeHTML(a.motivation||'--')}</div><div class="meta" style="margin-top:8px">${new Date(a.date).toLocaleString()}</div><div style="margin-top:10px;display:flex;gap:8px"><button onclick="adminAcceptApplication(${i})">Accepter</button><button onclick="adminDeleteApplication(${i})" style="background:var(--danger);color:#fff">Suppr</button></div></div>`).join(''); }
function adminHandleQuick(i){ const arr=lmc_get('lmc_quick_apps',[]); if(!arr[i]) return; arr[i].handled=true; lmc_set('lmc_quick_apps',arr); auditLog('admin',`Quick-app traitÃ©e: ${arr[i].pseudo}`); renderQuickApps(); }
function adminDelQuick(i){ const arr=lmc_get('lmc_quick_apps',[]); arr.splice(i,1); lmc_set('lmc_quick_apps',arr); auditLog('admin','quick deleted'); renderQuickApps(); }
function adminAcceptApplication(i){ const arr=lmc_get('lmc_applications',[]); if(!arr[i]) return; const app=arr[i]; const roleId = createRole(`Member-${app.pseudo||'user'}`, 'Accepted applicant'); auditLog('admin', `Application acceptÃ©e: ${app.pseudo||app.discord} -> role ${roleId}`); arr.splice(i,1); lmc_set('lmc_applications',arr); renderApplications(); renderRoles(); }
function adminDeleteApplication(i){ const arr=lmc_get('lmc_applications',[]); arr.splice(i,1); lmc_set('lmc_applications',arr); auditLog('admin','application deleted'); renderApplications(); }

// ----------------- Roles management -----------------
function createRole(name,desc){ const roles=lmc_get('lmc_roles',[]); const id='r'+Date.now(); roles.unshift({id,name,desc}); lmc_set('lmc_roles',roles); auditLog('role',`Role created: ${name}`); renderRoles(); return id; }
function deleteRole(id){ let roles=lmc_get('lmc_roles',[]); roles=roles.filter(r=>r.id!==id); lmc_set('lmc_roles',roles); auditLog('role',`Role deleted: ${id}`); renderRoles(); }
function renderRoles(){ const roles=lmc_get('lmc_roles',[]); const el=document.getElementById('rolesTab'); const publicRoles=document.getElementById('rolesList'); el.innerHTML = roles.length ? roles.map(r=>`<div class="item"><div><b>${escapeHTML(r.name)}</b><div class="meta">${escapeHTML(r.desc||'')}</div></div><div><button onclick="deleteRole('${r.id}')">Suppr</button></div></div>`).join('') : '<div class="item">Aucun rÃ´le</div>'; publicRoles.innerHTML = roles.length ? roles.map(r=>`<div class="small">${escapeHTML(r.name)}${r.desc? ' â€¢ '+escapeHTML(r.desc):''}</div>`).join('') : '<div class="small-muted">Aucun rÃ´le</div>'; }

// ----------------- Help Requests & Answers -----------------
function renderHelpRequests(){ const requests=lmc_get('lmc_helpRequests',[]); const el=document.getElementById('helpTab'); if(!requests.length){ el.innerHTML='<div class="item">Aucune demande</div>'; return; } el.innerHTML = requests.map((req,i)=>`<div class="item"><div><b>${escapeHTML(req.pseudo||'Anon')}</b><div class="meta">${escapeHTML(req.question)}</div><div class="meta">${req.answer? 'RÃ©ponse: '+escapeHTML(req.answer):'âŒ Pas de rÃ©ponse'}</div></div><div style="display:flex;flex-direction:column;gap:6px"><input id="helpAnswer${i}" placeholder="RÃ©pondre..."><button onclick="replyHelp(${i})">RÃ©pondre</button></div></div>`).join(''); }
function replyHelp(i){ const requests=lmc_get('lmc_helpRequests',[]); const answer = document.getElementById('helpAnswer'+i).value.trim(); if(!answer) return alert('Ã‰cris une rÃ©ponse'); requests[i].answer = answer; lmc_set('lmc_helpRequests',requests); auditLog('admin',`Help replied: ${requests[i].pseudo}`); renderHelpRequests(); renderHelpAnswers(); }
function renderHelpAnswers(){ const requests=lmc_get('lmc_helpRequests',[]); const out = requests.filter(r=>r.answer).map(r=>`<div class="suggestion"><b>${escapeHTML(r.pseudo||'Anon')}</b> a demandÃ©: ${escapeHTML(r.question)}<br>ğŸ’¡ RÃ©ponse: ${escapeHTML(r.answer)}</div>`).join(''); document.getElementById('helpAnswers').innerHTML = out || 'Aucune'; }

// ----------------- Meeting board (admin) -----------------
function postMeetingMsg(){ const txt = prompt('Ã‰cris ton message pour le board de rÃ©union (short):'); if(!txt) return; const board=lmc_get('lmc_meetingBoard',[]); board.unshift({text:txt, time:new Date().toISOString()}); lmc_set('lmc_meetingBoard',board); auditLog('meeting','New meeting msg'); renderMeetingBoard(); }
function renderMeetingBoard(){ const board=lmc_get('lmc_meetingBoard',[]); const el=document.getElementById('meetingTab'); el.innerHTML = board.length ? board.map(m=>`<div class="item">${escapeHTML(m.text)}<div class="meta">${new Date(m.time).toLocaleString()}</div></div>`).join('') : '<div class="item">Aucun message de rÃ©union</div>'; }

// ----------------- Audit -----------------
function renderAudit(){ const logs=lmc_get('lmc_audit',[]); const el=document.getElementById('auditTab'); if(!logs.length){ el.innerHTML = '<div class="item">Journal vide</div>'; return; } el.innerHTML = logs.slice(0,200).map(l=>`<div class="item"><div><b>${escapeHTML(l.type)}</b><div class="meta">${escapeHTML(l.message)}</div></div><div class="meta">${new Date(l.time).toLocaleString()}</div></div>`).join(''); }

// ----------------- Games & Quiz implementations -----------------
let currentQuiz = null;
const cultureQuiz = { quizId:'culture_01', title:'Quiz Culture GÃ©nÃ©rale', description:'10 questions', questions:[ { q:'Quelle est la capitale de l\'Espagne ?', choices:['Madrid','Barcelone','Valence','SÃ©ville'], answer:0 }, { q:'Qui a peint la Joconde ?', choices:['Van Gogh','Picasso','LÃ©onard de Vinci','Rembrandt'], answer:2 }, { q:'Combien de continents ?', choices:['5','6','7','8'], answer:2 }, { q:'Symbole O ?', choices:['Or','OxygÃ¨ne','Argent','Osmium'], answer:1 }, { q:'Langue la plus parlÃ©e ?', choices:['Anglais','Mandarin','Espagnol','Arabe'], answer:1 }, { q:'Plus grand ocÃ©an ?', choices:['Atlantique','Indien','Pacifique','Arctique'], answer:2 }, { q:'Auteur Le Petit Prince ?', choices:['Saint-ExupÃ©ry','Victor Hugo','Jules Verne','Camus'], answer:0 }, { q:'PlanÃ¨te rouge ?', choices:['VÃ©nus','Mars','Jupiter','Saturne'], answer:1 }, { q:'AnnÃ©e premier pas sur la Lune ?', choices:['1965','1969','1972','1959'], answer:1 }, { q:'Pays du Soleil Levant ?', choices:['Chine','Japon','ThaÃ¯lande','CorÃ©e'], answer:1 } ] };
function renderCultureQuiz(){ currentQuiz = cultureQuiz; const c = document.getElementById('quizContainer'); let html = `<div><strong>${escapeHTML(cultureQuiz.title)}</strong><div class="small">${escapeHTML(cultureQuiz.description)}</div>`; cultureQuiz.questions.forEach((qq,idx)=>{ html += `<div class="question"><div><b>Q${idx+1}</b> ${escapeHTML(qq.q)}</div>`; qq.choices.forEach((ch,i)=>{ html += `<label class="choice"><input type="radio" name="cq_${idx}" value="${i}"> ${escapeHTML(ch)}</label>`; }); html += `</div>`; }); html += `<div style="margin-top:8px"><button id="submitCulture" class="btn">Soumettre</button><div id="cultureRes" class="small-muted" style="margin-top:8px"></div></div></div>`; c.innerHTML = html; document.getElementById('submitCulture').addEventListener('click', ()=>{ const pseudo = document.getElementById('playerPseudo').value.trim() || 'anonymous'; let score=0; for(let i=0;i<cultureQuiz.questions.length;i++){ const sel=document.querySelector(`input[name="cq_${i}"]:checked`); if(sel && parseInt(sel.value,10)===cultureQuiz.questions[i].answer) score++; } const scoreObj={quizId:cultureQuiz.quizId, pseudo, score, total:cultureQuiz.questions.length, date:new Date().toISOString()}; const arr=lmc_get('lmc_quiz_scores',[]); arr.unshift(scoreObj); lmc_set('lmc_quiz_scores',arr); auditLog('quiz',`Score ${score}/${cultureQuiz.questions.length} by ${pseudo}`); addPoints(pseudo, score*3); document.getElementById('cultureRes').textContent=`Score: ${score}/${cultureQuiz.questions.length} â€” sauvegardÃ©`; renderLeaderboard(); }); }

// Guess number game
function setupGuess(){ const btn=document.getElementById('guess_btn'); btn.addEventListener('click', ()=>{ const pseudo=document.getElementById('playerPseudo').value.trim()||'anonymous'; const val=parseInt(document.getElementById('guess_input').value,10); const out=document.getElementById('guess_feedback'); if(!val||val<1||val>20){ out.textContent='Choisis 1-20'; return; } const rnd=Math.floor(Math.random()*20)+1; if(val===rnd){ out.textContent=`Bravo ! C'Ã©tait ${rnd} ğŸ‰`; addPoints(pseudo,5); auditLog('game',`Guess correct by ${pseudo}`); } else { out.textContent=`Perdu â€” le nombre Ã©tait ${rnd}`; auditLog('game',`Guess ${val} by ${pseudo} vs ${rnd}`); } renderLeaderboard(); }); }

// RPS
function setupRPS(){ document.querySelectorAll('[data-rps]').forEach(btn=>{ btn.addEventListener('click', ()=>{ const pseudo=document.getElementById('playerPseudo').value.trim()||'anonymous'; const choice=btn.dataset.rps; const ops=['rock','paper','scissors']; const comp=ops[Math.floor(Math.random()*3)]; const out=document.getElementById('rps_feedback'); const decide=(a,b)=>{ if(a===b) return 'Ã‰galitÃ©'; if((a==='rock'&&b==='scissors')||(a==='paper'&&b==='rock')||(a==='scissors'&&b==='paper')) return 'Tu gagnes!'; return 'Tu perds'; }; const res=decide(choice,comp); out.textContent=`Toi: ${choice} â€” Ordi: ${comp} â†’ ${res}`; auditLog('game',`RPS ${choice} vs ${comp} by ${pseudo}`); if(res==='Tu gagnes!') addPoints(pseudo,2); else if(res==='Ã‰galitÃ©') addPoints(pseudo,1); renderLeaderboard(); }); }); }

// Dice roll
function setupDice(){ document.getElementById('rollDiceBtn').addEventListener('click', ()=>{ const pseudo=document.getElementById('playerPseudo').value.trim()||'anonymous'; const p=Math.floor(Math.random()*6)+1; const c=Math.floor(Math.random()*6)+1; const out=document.getElementById('diceRes'); out.textContent=`Toi: ${p} â€” Ordi: ${c}`; if(p>c){ out.textCon
