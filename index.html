<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Les Mecs Chills — Hub Complet</title>

  <!-- Eviter cache navigateur après publication -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">

  <style>
    :root{
      --bg:#071126;
      --card:#0f1620;
      --muted:#9fb0c8;
      --accent1:#8e61ff;
      --accent2:#4fb3ff;
      --success:#43b581;
      --danger:#ff6b6b;
      --text:#eaf2ff;
      --glass: rgba(255,255,255,0.03);
      --radius:12px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: Inter, Poppins, system-ui, Arial, sans-serif;
      background: linear-gradient(120deg,#071126 0%, #08121a 100%);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      padding-top:72px;
    }
    /* NAV */
    .nav{
      position:fixed;top:0;left:0;right:0;height:72px;
      display:flex;align-items:center;justify-content:space-between;
      padding:10px 20px;background:rgba(6,8,12,0.75);
      backdrop-filter: blur(6px);z-index:1000;
    }
    .brand{display:flex;gap:12px;align-items:center}
    .badge{width:48px;height:48px;border-radius:12px;background:linear-gradient(135deg,var(--accent1),var(--accent2));display:flex;align-items:center;justify-content:center;color:#071126;font-weight:800}
    .brand-title{font-weight:800}
    .menu{display:flex;gap:8px;align-items:center}
    .menu a{color:var(--muted);text-decoration:none;padding:8px 10px;border-radius:8px}
    .menu a:hover{color:#fff;background:rgba(255,255,255,0.03)}
    /* Container & cards */
    .container{max-width:1150px;margin:22px auto;padding:0 18px}
    .card{background:var(--card);padding:18px;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,0.6);margin-bottom:18px}
    .hero{display:flex;gap:18px;align-items:center}
    .hero-left{flex:1}
    h1{font-size:28px;margin:0}
    h2{margin:0 0 8px}
    .lead{color:var(--muted);margin:8px 0 12px}
    .actions{display:flex;gap:8px}
    .btn{padding:10px 14px;border-radius:999px;border:none;cursor:pointer;font-weight:700;background:linear-gradient(90deg,var(--accent2),var(--accent1));color:#071126}
    .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted)}
    .btn.small{padding:6px 10px;border-radius:8px}
    .small{font-size:13px}
    .muted{color:var(--muted)}
    input,select,textarea{background:var(--glass);border:1px solid rgba(255,255,255,0.03);color:var(--text);padding:10px;border-radius:8px;outline:none;width:100%;box-sizing:border-box}
    textarea{resize:vertical}
    .form-row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    .form-col{display:flex;flex-direction:column;gap:8px}
    .subcard{background:rgba(255,255,255,0.02);padding:12px;border-radius:10px;margin-top:12px}
    .game-card{background:rgba(255,255,255,0.02);padding:12px;border-radius:10px;margin-top:12px}
    .list{display:flex;flex-direction:column;gap:10px;margin-top:8px}
    .item{background:rgba(255,255,255,0.02);padding:10px;border-radius:8px;display:flex;justify-content:space-between;gap:12px;align-items:center}
    .footer{text-align:center;padding:20px;color:var(--muted);font-size:13px}
    @media(max-width:900px){ .hero{flex-direction:column} .menu{display:none} .form-row{flex-direction:column} }
  </style>
</head>
<body>
  <header class="nav" role="banner">
    <div class="brand" aria-label="Brand">
      <div class="badge" aria-hidden="true">LMC</div>
      <div>
        <div class="brand-title">Les Mecs Chills</div>
        <div class="small muted">Serveur Discord — Hub communautaire</div>
      </div>
    </div>
    <nav class="menu" role="navigation" aria-label="Main menu">
      <a href="#accueil">Accueil</a>
      <a href="#about">À propos</a>
      <a href="#brawl">Brawl</a>
      <a href="#roles">Rôles</a>
      <a href="#games">Jeux</a>
      <a href="#contact">Suggestions</a>
      <a href="#recruitment">Recrutement</a>
      <a href="#help">Aide</a>
    </nav>
  </header>

  <main class="container" role="main">
    <!-- ACCUEIL -->
    <section id="accueil" class="card hero" aria-labelledby="home-title">
      <div class="hero-left">
        <h1 id="home-title">JUSTE DES MECS CHILLS EN FAIT !</h1>
        <p class="lead">Rejoins notre serveur Discord pour des tournois, soirées chill, mini-jeux, rôles exclusifs et une communauté sympa.</p>
        <div class="actions">
          <a class="btn" href="https://discord.gg/wUtq5ZA9Kt" target="_blank" rel="noopener">Rejoindre le Discord</a>
          <button id="openGames" class="btn ghost">Voir jeux</button>
        </div>
        <div class="small muted" style="margin-top:10px">Site 100% client — données stockées localement en localStorage (clé lmc_*).</div>
      </div>
      <div style="width:340px;display:flex;flex-direction:column;gap:12px">
        <div class="card">
          <strong>Prochains events</strong>
          <div class="small muted" style="margin-top:8px">Tournoi Brawl — Dimanche 20h</div>
        </div>
        <div class="card">
          <strong>Rôles VIP</strong>
          <div class="small muted" style="margin-top:8px">Accès salon VIP & avantages</div>
        </div>
      </div>
    </section>

    <!-- ABOUT -->
    <section id="about" class="card" aria-labelledby="about-title">
      <h2 id="about-title">À propos</h2>
      <p>Notre serveur est un espace de partage, entraide et fun. Que tu sois compétitif ou chill, tu trouveras ta place.</p>
    </section>

    <!-- BRAWL -->
    <section id="brawl" class="card">
      <h2>Brawl Stars</h2>
      <p>Salons dédiés, stratégies, clips et organisation d'équipes pour jouer ensemble.</p>
    </section>

    <!-- ROLES -->
    <section id="roles" class="card" aria-labelledby="roles-title">
      <h2 id="roles-title">Rôles & Postulations</h2>

      <div class="subcard" aria-labelledby="quick-title">
        <h3 id="quick-title">Postulation rapide</h3>
        <p class="small muted">Pseudo + rôle → postulation instantanée.</p>
        <div class="form-row" style="margin-top:8px">
          <input id="quick_pseudo" type="text" aria-label="pseudo rapide" placeholder="Ex: ChillUser#1234">
          <select id="quick_role" aria-label="role rapide">
            <option value="">Choisir un rôle</option>
            <option value="Modérateur">Modérateur</option>
            <option value="Journaliste">Journaliste</option>
            <option value="Beta Testeur">Beta Testeur</option>
          </select>
          <button id="quick_submit" class="btn small">Postuler</button>
        </div>
        <div id="quick_msg" class="small muted" style="margin-top:8px"></div>
      </div>

      <div class="subcard" aria-labelledby="full-title">
        <h3 id="full-title">Candidature détaillée</h3>
        <form id="advancedApply" class="form-col" aria-label="candidature détaillée">
          <label for="app_pseudo">Pseudo</label><input id="app_pseudo" type="text" required>
          <label for="app_age">Âge</label><input id="app_age" type="number" min="13">
          <label for="app_experience">Expérience</label><input id="app_experience" type="text">
          <label for="app_hours">Heures / semaine</label><input id="app_hours" type="number" min="0">
          <label for="app_motivation">Lettre de motivation</label>
          <textarea id="app_motivation" rows="5" maxlength="2000"></textarea>
          <div style="margin-top:8px"><button type="submit" class="btn small">Envoyer candidature</button></div>
          <div id="app_msg" class="small muted" style="margin-top:8px"></div>
        </form>
      </div>
    </section>

    <!-- EVENTS -->
    <section id="events" class="card">
      <h2>Événements</h2>
      <p>Tournois, soirées, concours et streamings communautaires.</p>
    </section>

    <!-- GAMES -->
    <section id="games" class="card" aria-labelledby="games-title">
      <h2 id="games-title">Jeux & Quiz</h2>

      <div class="game-card" id="quiz_card">
        <h3>Quiz — Culture générale</h3>
        <div id="quizArea" class="form-col"></div>
      </div>

      <div class="game-card" id="guess_card">
        <h3>Devine le nombre (1-50)</h3>
        <div class="form-row">
          <input id="guess_pseudo" type="text" placeholder="Ton pseudo" aria-label="pseudo guess">
          <input id="guess_val" type="number" min="1" max="50" placeholder="Nombre">
          <button id="guess_play" class="btn small">Jouer</button>
        </div>
        <div id="guess_feedback" class="small muted" style="margin-top:8px"></div>
      </div>

      <div class="game-card" id="rps_card">
        <h3>Pierre / Feuille / Ciseaux</h3>
        <div class="form-row">
          <input id="rps_pseudo" type="text" placeholder="Ton pseudo">
          <button data-rps="rock" class="btn small rps">Pierre</button>
          <button data-rps="paper" class="btn small rps">Feuille</button>
          <button data-rps="scissors" class="btn small rps">Ciseaux</button>
        </div>
        <div id="rps_feedback" class="small muted" style="margin-top:8px"></div>
      </div>

      <div class="game-card" id="dice_card">
        <h3>Dice Roll</h3>
        <div class="form-row">
          <input id="dice_pseudo" type="text" placeholder="Ton pseudo">
          <button id="dice_roll" class="btn small">Lancer le dé</button>
        </div>
        <div id="dice_out" class="small muted" style="margin-top:8px"></div>
      </div>
    </section>

    <!-- CONTACT / SUGGESTIONS -->
    <section id="contact" class="card">
      <h2>Contact & Suggestions</h2>
      <form id="suggestForm" class="form-col" aria-label="suggestions">
        <label for="suggest_pseudo">Pseudo (optionnel)</label>
        <input id="suggest_pseudo" type="text" placeholder="Pseudo (optionnel)">
        <label for="suggest_text">Suggestion / Message</label>
        <textarea id="suggest_text" rows="4" required></textarea>
        <div style="margin-top:8px"><button type="submit" class="btn">Envoyer</button></div>
        <div id="suggest_msg" class="small muted" style="margin-top:8px"></div>
      </form>

      <h3 style="margin-top:12px">Suggestions récentes</h3>
      <div id="suggest_list" class="list muted small">Aucune suggestion</div>
    </section>

    <!-- RECRUITMENT -->
    <section id="recruitment" class="card">
      <h2>Questionnaire de recrutement</h2>
      <form id="recruitForm" class="form-col" aria-label="recrutement">
        <label for="r_pseudo">Pseudo Discord</label>
        <input id="r_pseudo" type="text" required>
        <label for="r_age">Âge</label>
        <input id="r_age" type="number" min="13" required>
        <label for="r_experience">Expérience Discord</label>
        <input id="r_experience" type="text" required>
        <label for="r_hours">Disponibilité (h / semaine)</label>
        <input id="r_hours" type="number" min="0" required>
        <label for="r_motivation">Lettre de motivation</label>
        <textarea id="r_motivation" rows="6" maxlength="2000" required></textarea>
        <div style="margin-top:8px"><button type="submit" class="btn">Envoyer ma candidature</button></div>
        <div id="recruit_msg" class="small muted" style="margin-top:8px"></div>
      </form>
    </section>

    <!-- HELP PUBLIC -->
    <section id="help" class="card">
      <h2>Demande d'aide</h2>
      <form id="helpForm" class="form-col" aria-label="aide">
        <label for="help_pseudo">Pseudo (optionnel)</label>
        <input id="help_pseudo" type="text" placeholder="Pseudo (optionnel)">
        <label for="help_question">Question / Problème</label>
        <textarea id="help_question" rows="4" required></textarea>
        <div style="margin-top:8px"><button type="submit" class="btn">Envoyer</button></div>
        <div id="help_msg" class="small muted" style="margin-top:8px"></div>
      </form>

      <h3 style="margin-top:12px">Informations / Aide (réponses publiques)</h3>
      <div id="help_answers" class="list muted small">Aucune information</div>
    </section>

    <footer class="footer">© Les Mecs Chills — Données en local (localStorage)</footer>
  </main>

  <!-- SCRIPT -->
  <script>
  // -------------------------
  // Helpers (atomic get/modify/set)
  // -------------------------
  function lmc_get(key, def){
    try {
      const raw = localStorage.getItem(key);
      return raw ? JSON.parse(raw) : def;
    } catch(e){
      console.error('lmc_get error', key, e);
      return def;
    }
  }
  function lmc_set(key, value){
    try {
      localStorage.setItem(key, JSON.stringify(value));
      return true;
    } catch(e){
      console.error('lmc_set error', key, e);
      return false;
    }
  }
  function nowStr(){ return new Date().toISOString().replace('T',' ').slice(0,16); }
  function escapeHTML(s){ if(s==null) return ''; return String(s).replace(/[&<>"']/g, ch => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[ch])); }

  // Initialize keys (ensure default arrays exist)
  (function initKeys(){
    lmc_get('lmc_announcements', []);
    lmc_get('lmc_suggestions', []);
    lmc_get('lmc_applications', []);
    lmc_get('lmc_quick_apps', []);
    lmc_get('lmc_contacts', []);
    lmc_get('lmc_roles', []);
    lmc_get('lmc_role_claims', {});
    lmc_get('lmc_audit', []);
    lmc_get('lmc_ai_saved', []);
    lmc_get('lmc_quiz_scores', []);
  })();

  // Audit logger
  function audit(type, message){
    const logs = lmc_get('lmc_audit', []);
    logs.unshift({ time: new Date().toISOString(), type, message });
    lmc_set('lmc_audit', logs.slice(0,200));
  }

  // -------------------------
  // Suggestions / Contact (lmc_suggestions or lmc_contacts)
  // -------------------------
  const suggestForm = document.getElementById('suggestForm');
  const suggestList = document.getElementById('suggest_list');
  const suggestMsg = document.getElementById('suggest_msg');

  function renderSuggestions(){
    const arr = lmc_get('lmc_suggestions', []);
    if(!arr.length){ suggestList.innerHTML = 'Aucune suggestion'; return; }
    suggestList.innerHTML = arr.slice(0,50).map(s => `<div class="item"><div><strong>${escapeHTML(s.pseudo||'Anon')}</strong><div class="small muted">${escapeHTML(s.text)}</div></div><div class="small muted">${escapeHTML(s.date? s.date : '')}</div></div>`).join('');
  }

  suggestForm.addEventListener('submit', function(e){
    e.preventDefault();
    const pseudo = document.getElementById('suggest_pseudo').value.trim();
    const text = document.getElementById('suggest_text').value.trim();
    if(!text){ suggestMsg.textContent = 'Message vide'; return; }
    // atomic
    const arr = lmc_get('lmc_suggestions', []);
    arr.unshift({ pseudo: pseudo || 'Anon', text, date: nowStr() });
    lmc_set('lmc_suggestions', arr);
    // also store in lmc_contacts for contact messages compatibility
    const contacts = lmc_get('lmc_contacts', []);
    contacts.unshift({ name: pseudo || 'Anon', email: '', msg: text, date: nowStr() });
    lmc_set('lmc_contacts', contacts);

    suggestMsg.textContent = '✅ Suggestion envoyée';
    audit('suggestion', `Suggestion by ${pseudo||'Anon'}: ${text.slice(0,80)}`);
    document.getElementById('suggest_pseudo').value = '';
    document.getElementById('suggest_text').value = '';
    renderSuggestions();
  });

  // -------------------------
  // Quick apps (lmc_quick_apps)
  // -------------------------
  document.getElementById('quick_submit').addEventListener('click', function(){
    const pseudo = document.getElementById('quick_pseudo').value.trim();
    const role = document.getElementById('quick_role').value;
    const msgEl = document.getElementById('quick_msg');
    if(!pseudo || !role){ msgEl.textContent = 'Pseudo et rôle requis'; return; }
    const arr = lmc_get('lmc_quick_apps', []);
    arr.unshift({ pseudo, role, date: nowStr(), handled: false });
    lmc_set('lmc_quick_apps', arr);
    msgEl.textContent = '✅ Postulation rapide enregistrée';
    audit('quickapp', `Quick app: ${pseudo} -> ${role}`);
    document.getElementById('quick_pseudo').value = ''; document.getElementById('quick_role').selectedIndex = 0;
  });

  // -------------------------
  // Advanced application (lmc_applications)
  // -------------------------
  document.getElementById('advancedApply').addEventListener('submit', function(e){
    e.preventDefault();
    const pseudo = document.getElementById('app_pseudo').value.trim();
    const age = document.getElementById('app_age').value;
    const exp = document.getElementById('app_experience').value.trim();
    const hours = document.getElementById('app_hours').value;
    const motiv = document.getElementById('app_motivation').value.trim();
    const msgEl = document.getElementById('app_msg');
    if(!pseudo){ msgEl.textContent = 'Pseudo requis'; return; }
    const arr = lmc_get('lmc_applications', []);
    arr.unshift({ pseudo, age, experience: exp, hours, motivation: motiv, date: nowStr() });
    lmc_set('lmc_applications', arr);
    msgEl.textContent = '✅ Candidature envoyée';
    audit('application', `Application: ${pseudo}`);
    this.reset();
  });

  // -------------------------
  // Recruitment form (store in lmc_applications as well for centralization)
  // -------------------------
  document.getElementById('recruitForm').addEventListener('submit', function(e){
    e.preventDefault();
    const pseudo = document.getElementById('r_pseudo').value.trim();
    const age = document.getElementById('r_age').value;
    const exp = document.getElementById('r_experience').value.trim();
    const hours = document.getElementById('r_hours').value;
    const motiv = document.getElementById('r_motivation').value.trim();
    if(!pseudo || !age || !exp || !hours){ document.getElementById('recruit_msg').textContent = 'Remplis tous les champs requis'; return; }
    const arr = lmc_get('lmc_applications', []);
    arr.unshift({ pseudo, age, experience: exp, hours, motivation: motiv, date: nowStr() });
    lmc_set('lmc_applications', arr);
    document.getElementById('recruit_msg').textContent = '✅ Candidature enregistrée';
    audit('recruitment', `Recruit: ${pseudo}`);
    this.reset();
  });

  // -------------------------
  // Help requests (lmc_contacts)
  // -------------------------
  document.getElementById('helpForm').addEventListener('submit', function(e){
    e.preventDefault();
    const pseudo = document.getElementById('help_pseudo').value.trim() || 'Anon';
    const q = document.getElementById('help_question').value.trim();
    if(!q){ document.getElementById('help_msg').textContent = 'Question vide'; return; }
    const arr = lmc_get('lmc_helpRequests', []);
    arr.unshift({ pseudo, question: q, date: nowStr(), answer: null });
    lmc_set('lmc_helpRequests', arr);
    // Also push into lmc_contacts for contact consistency
    const contacts = lmc_get('lmc_contacts', []);
    contacts.unshift({ name: pseudo, email:'', msg: q, date: nowStr() });
    lmc_set('lmc_contacts', contacts);
    document.getElementById('help_msg').textContent = '✅ Demande envoyée — un modérateur peut y répondre depuis Discord';
    audit('help', `Help request by ${pseudo}`);
    this.reset();
    renderHelpAnswers();
  });

  function renderHelpAnswers(){
    // show only answered help requests (admin replies can be inserted into localStorage manually if needed)
    const arr = lmc_get('lmc_helpRequests', []);
    const out = arr.filter(r => r.answer).map(r => `<div class="item"><div><strong>${escapeHTML(r.pseudo)}</strong><div class="small muted">${escapeHTML(r.question)}</div><div style="margin-top:8px"><strong>Réponse:</strong> ${escapeHTML(r.answer)}</div></div><div class="small muted">${escapeHTML(r.date)}</div></div>`).join('');
    document.getElementById('help_answers').innerHTML = out || 'Aucune information';
  }

  // -------------------------
  // Quiz (store scores in lmc_quiz_scores)
  // -------------------------
  const quizData = {
    quizId: 'culture_01',
    title: 'Quiz Culture Générale',
    questions: [
      { q: "Quelle est la capitale de la France ?", choices:["Paris","Lyon","Marseille","Bordeaux"], answer:0 },
      { q: "Combien de continents ?", choices:["5","6","7","8"], answer:2 },
      { q: "Auteur du 'Petit Prince' ?", choices:["Victor Hugo","Camus","Antoine de Saint-Exupéry","Jules Verne"], answer:2 }
    ]
  };

  function renderQuiz(){
    const container = document.getElementById('quizArea');
    let html = `<div><strong>${escapeHTML(quizData.title)}</strong><div class="small muted">Test rapide — tes résultats sont sauvegardés localement</div></div>`;
    quizData.questions.forEach((q, idx) => {
      html += `<div style="margin-top:8px"><div><strong>Q${idx+1}:</strong> ${escapeHTML(q.q)}</div>`;
      q.choices.forEach((c, ci) => {
        html += `<label style="display:block;margin:6px 0"><input type="radio" name="qq_${idx}" value="${ci}"> ${escapeHTML(c)}</label>`;
      });
      html += `</div>`;
    });
    html += `<div style="margin-top:10px"><button id="submitQuiz" class="btn small">Soumettre</button> <div id="quizResult" class="small muted" style="margin-top:8px"></div></div>`;
    container.innerHTML = html;
    document.getElementById('submitQuiz').addEventListener('click', function(){
      const pseudo = (document.getElementById('guess_pseudo') && document.getElementById('guess_pseudo').value.trim()) || 'anonymous';
      let score = 0;
      for(let i=0;i<quizData.questions.length;i++){
        const sel = document.querySelector(`input[name="qq_${i}"]:checked`);
        if(sel && parseInt(sel.value,10) === quizData.questions[i].answer) score++;
      }
      const scores = lmc_get('lmc_quiz_scores', []);
      scores.unshift({ quizId: quizData.quizId, pseudo, score, total: quizData.questions.length, date: nowStr() });
      lmc_set('lmc_quiz_scores', scores);
      document.getElementById('quizResult').textContent = `Résultat: ${score}/${quizData.questions.length} — sauvegardé`;
      audit('quiz', `Quiz ${quizData.quizId} by ${pseudo} => ${score}/${quizData.questions.length}`);
    });
  }

  // -------------------------
  // Guess number game
  // -------------------------
  let secret = Math.floor(Math.random()*50)+1;
  document.getElementById('guess_play').addEventListener('click', function(){
    const pseudo = document.getElementById('guess_pseudo').value.trim() || 'anon';
    const val = parseInt(document.getElementById('guess_val').value,10);
    const out = document.getElementById('guess_feedback');
    if(isNaN(val) || val < 1 || val > 50){ out.textContent = 'Choisis un nombre entre 1 et 50'; return; }
    if(val === secret){ out.textContent = `Bravo ${pseudo} — c'était ${secret} ! (réinitialisation)`; audit('game','guess correct by '+pseudo); secret = Math.floor(Math.random()*50)+1; }
    else { out.textContent = val < secret ? 'Trop petit' : 'Trop grand'; audit('game', `guess ${val} by ${pseudo}`); }
  });

  // -------------------------
  // RPS
  // -------------------------
  document.querySelectorAll('.rps').forEach(btn => {
    btn.addEventListener('click', function(){
      const pseudo = document.getElementById('rps_pseudo').value.trim() || 'anon';
      const user = this.dataset.rps;
      const opts = ['rock','paper','scissors'];
      const comp = opts[Math.floor(Math.random()*3)];
      const out = document.getElementById('rps_feedback');
      if(user === comp) out.textContent = `Égalité — Ordi: ${comp}`;
      else {
        const win = (user==='rock' && comp==='scissors') || (user==='paper' && comp==='rock') || (user==='scissors' && comp==='paper');
        out.textContent = (win ? 'Tu gagnes !' : 'Tu perds...') + ` (Ordi: ${comp})`;
      }
      audit('game', `rps ${user} vs ${comp} by ${pseudo}`);
    });
  });

  // -------------------------
  // Dice roll
  // -------------------------
  document.getElementById('dice_roll').addEventListener('click', function(){
    const pseudo = document.getElementById('dice_pseudo').value.trim() || 'anon';
    const p = Math.floor(Math.random()*6)+1;
    const c = Math.floor(Math.random()*6)+1;
    const out = document.getElementById('dice_out');
    out.textContent = `Toi: ${p} — Ordi: ${c} — ${p>c ? 'Gagné' : p===c ? 'Égalité' : 'Perdu'}`;
    audit('game', `dice ${p} vs ${c} by ${pseudo}`);
  });

  // -------------------------
  // Rendering & init
  // -------------------------
  function renderAllPublic(){
    renderSuggestions();
    renderHelpAnswers();
    renderQuiz();
  }

  // open games quick link
  document.getElementById('openGames').addEventListener('click', function(){ document.querySelector('#games').scrollIntoView({behavior:'smooth'}); });

  // initial render
  document.addEventListener('DOMContentLoaded', function(){
    renderAllPublic();
    // ensure lmc_quiz_scores exists
    lmc_get('lmc_quiz_scores', []);
  });

  // Expose some helpers for debugging (optional)
  window._lmc = { get: lmc_get, set: lmc_set, audit: audit };
  </script>
</body>
</html>
