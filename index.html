<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Les Mecs Chills - Communaut√© Gaming & Cr√©ation</title>
    <!-- Chargement de Tailwind CSS pour un design rapide et responsive -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chargement de Font Awesome pour les ic√¥nes -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" xintegrity="sha512-SnH5WK+bZxgPHs44uWIX+LLMD/cd8kFyo5T63G3l81gD4yL/s7F3S7zOq5w7F/4wA5eQ2j7M4z8+w+A3w+Q==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        :root {
            --bg: #070e17;
            --card-bg: #10192b;
            --primary: #3b82f6; /* Blue-500 */
            --primary-light: #60a5fa;
            --text: #e5e7eb; /* Gray-200 */
            --muted: #9ca3af; /* Gray-400 */
            --maxw: 1150px;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.6;
            scroll-behavior: smooth;
        }
        .container {
            max-width: var(--maxw);
            margin: 0 auto;
            padding: 0 1rem;
        }
        .card, .panel {
            background-color: var(--card-bg);
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        .btn {
            @apply inline-flex items-center justify-center px-4 py-2 font-semibold transition duration-200 rounded-lg cursor-pointer h-11;
            background-color: var(--primary);
            color: var(--bg);
        }
        .btn:hover {
            background-color: var(--primary-light);
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(59, 130, 246, 0.3);
        }
        .btn.ghost {
            background-color: transparent;
            color: var(--primary);
            border: 1px solid var(--primary);
        }
        .btn.ghost:hover {
            background-color: rgba(59, 130, 246, 0.1);
        }
        .btn.small {
            @apply px-3 py-1 h-8 text-sm;
        }
        input, textarea, select {
            @apply w-full p-3 bg-gray-700 text-white border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-150;
        }
        .list .item {
            @apply flex justify-between items-center py-3 border-b border-gray-700;
        }
        .list .item:last-child {
            border-bottom: none;
        }
        h1 { @apply text-4xl lg:text-5xl font-extrabold mb-4 text-white; }
        h2 { @apply text-3xl font-bold mb-6 mt-10 text-white; }
        h3 { @apply text-xl font-bold mb-4 text-white; }
        .muted { color: var(--muted); }
        .small { @apply text-sm; }

        /* Navigation specifics */
        nav {
            background-color: rgba(16, 25, 43, 0.95); /* Semi-transparent card-bg */
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            z-index: 50;
        }
        
        /* Pyodide loader */
        #pyodide_status {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Leaderboard styling */
        #leaderboard_card {
            border-left: 4px solid var(--primary);
        }
    </style>
    <!-- Script Pyodide (lazy load) -->
    <script src="https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#3b82f6',
                        'card-bg': '#10192b',
                        'bg': '#070e17',
                    }
                }
            }
        }
    </script>
</head>
<body>

    <!-- Navigation Bar -->
    <nav class="sticky top-0 shadow-lg">
        <div class="container flex justify-between items-center py-4">
            <div class="text-2xl font-bold text-primary">Les Mecs Chills</div>
            <div id="nav-menu" class="hidden md:flex space-x-6">
                <a href="#home" class="hover:text-primary transition duration-150">Accueil</a>
                <a href="#games" class="hover:text-primary transition duration-150">Jeux & Points</a>
                <a href="#recruitment" class="hover:text-primary transition duration-150">Recrutement</a>
                <a href="#admin_area" class="hover:text-primary transition duration-150">Espace Admin</a>
                <a href="#contact" class="hover:text-primary transition duration-150">Contact</a>
            </div>
            <button id="menu-toggle" class="md:hidden text-xl">
                <i class="fas fa-bars"></i>
            </button>
        </div>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="md:hidden hidden bg-card-bg p-4 border-t border-gray-700">
            <a href="#home" class="block py-2 hover:text-primary">Accueil</a>
            <a href="#games" class="block py-2 hover:text-primary">Jeux & Points</a>
            <a href="#recruitment" class="block py-2 hover:text-primary">Recrutement</a>
            <a href="#admin_area" class="block py-2 hover:text-primary">Espace Admin</a>
            <a href="#contact" class="block py-2 hover:text-primary">Contact</a>
        </div>
    </nav>

    <main class="container py-12">

        <!-- 1. Accueil (Home) -->
        <section id="home" class="min-h-screen pt-16">
            <h1 class="text-center">Bienvenue chez <span class="text-primary">Les Mecs Chills</span></h1>
            <p class="text-xl text-center muted max-w-3xl mx-auto mb-10">
                L'endroit o√π la cr√©ation, le gaming et la bonne humeur se rencontrent. D√©couvrez nos projets, postulez et d√©fiez vos amis dans nos mini-jeux !
            </p>
            <div class="grid md:grid-cols-3 gap-6">
                <div class="card text-center">
                    <i class="fas fa-gamepad text-4xl text-primary mb-3"></i>
                    <h3 class="!mt-0">Mini-Jeux</h3>
                    <p class="small muted">Accumulez des points et grimpez dans le classement mondial.</p>
                </div>
                <div class="card text-center">
                    <i class="fas fa-users-cog text-4xl text-primary mb-3"></i>
                    <h3 class="!mt-0">Recrutement</h3>
                    <p class="small muted">Rejoignez l'√©quipe en soumettant votre candidature d√©taill√©e.</p>
                </div>
                <div class="card text-center">
                    <i class="fas fa-tools text-4xl text-primary mb-3"></i>
                    <h3 class="!mt-0">Espace Dev</h3>
                    <p class="small muted">Le bureau admin secret avec terminal Python int√©gr√©.</p>
                </div>
            </div>
            
            <h2 id="announcements_title">Annonces r√©centes</h2>
            <div id="announcements_list" class="list">
                <!-- Annonces charg√©es ici -->
                <div class="item">
                    <div class="font-semibold">Lancement du site !</div>
                    <div class="small muted">2025-01-01</div>
                </div>
            </div>
        </section>

        <hr class="border-gray-800 my-12" />

        <!-- 2. Jeux & Points (Games) -->
        <section id="games" class="py-12">
            <h2>üéÆ Espace Jeux et Classement Global</h2>
            <p class="muted mb-8">Jouez et gagnez des points (stock√©s localement) pour vous mesurer aux autres membres ! Entrez un pseudo pour commencer.</p>

            <div class="mb-6">
                <label for="game_pseudo_input" class="block mb-2 font-semibold">Votre Pseudo <span class="text-xs muted">(Ex: ChillUser#1234)</span></label>
                <input id="game_pseudo_input" placeholder="Pseudo exact" value="JoueurAnonyme#42" />
            </div>

            <div class="grid lg:grid-cols-2 gap-8">
                <!-- Mini-Jeu: Pierre-Feuille-Ciseaux (RPS) -->
                <div class="card">
                    <h3>Pierre-Feuille-Ciseaux (RPS)</h3>
                    <p class="small muted mb-4">Gagnez **+3 points** si vous battez le bot !</p>
                    <div class="flex justify-around space-x-2 mb-4">
                        <button class="btn small rps_choice" data-choice="Pierre">ü™® Pierre</button>
                        <button class="btn small rps_choice" data-choice="Feuille">üìÑ Feuille</button>
                        <button class="btn small rps_choice" data-choice="Ciseaux">‚úÇÔ∏è Ciseaux</button>
                    </div>
                    <div id="rps_result" class="text-center mt-4 font-semibold"></div>
                </div>

                <!-- Mini-Jeu: Devine le nombre (Guess) -->
                <div class="card">
                    <h3>Devine le Nombre (1-50)</h3>
                    <p class="small muted mb-4">Trouvez le nombre cach√© en 5 tentatives. Gagnez **+5 points** !</p>
                    <input id="guess_input" type="number" min="1" max="50" placeholder="Votre tentative..." class="mb-3">
                    <button id="guess_submit" class="btn w-full">Deviner</button>
                    <div id="guess_result" class="text-center mt-4 font-semibold"></div>
                    <div id="guess_attempts" class="text-center small muted mt-2">Tentatives restantes: 5</div>
                </div>
            </div>
            
            <!-- A. Leaderboard (placer dans #games) -->
            <div class="game-card card mt-10" id="leaderboard_card">
                <h3>üèÜ Classement Global</h3>
                <p class="small muted mb-4">Ce classement est mis √† jour en temps r√©el √† chaque gain de point.</p>
                <div id="leaderboard" class="list small muted">Chargement du classement...</div>
            </div>
        </section>

        <hr class="border-gray-800 my-12" />

        <!-- 3. Recrutement (Recruitment) -->
        <section id="recruitment" class="py-12">
            <h2>üßë‚Äçüíª Postuler pour rejoindre l'√©quipe</h2>
            <p class="muted mb-8">Remplissez cette candidature d√©taill√©e. Elle sera visible par les administrateurs apr√®s leur connexion au panneau de contr√¥le.</p>

            <div class="card max-w-xl mx-auto">
                <form id="advancedApplyForm">
                    <div class="space-y-4">
                        <div>
                            <label for="apply_pseudo" class="block mb-1 font-semibold">Pseudo / ID Discord</label>
                            <input id="apply_pseudo" required placeholder="Votre Pseudo#1234">
                        </div>
                        <div>
                            <label for="apply_age" class="block mb-1 font-semibold">√Çge</label>
                            <input id="apply_age" type="number" required min="10" placeholder="Votre √¢ge">
                        </div>
                        <div>
                            <label for="apply_experience" class="block mb-1 font-semibold">Exp√©rience (Comp√©tences)</label>
                            <textarea id="apply_experience" required rows="3" placeholder="D√©crivez votre exp√©rience en gaming, mod√©ration ou cr√©ation."></textarea>
                        </div>
                        <div>
                            <label for="apply_motivation" class="block mb-1 font-semibold">Motivation</label>
                            <textarea id="apply_motivation" required rows="3" placeholder="Pourquoi souhaitez-vous rejoindre Les Mecs Chills ?"></textarea>
                        </div>
                        <button type="submit" class="btn w-full mt-4">Envoyer la Candidature</button>
                    </div>
                </form>
                <div id="apply_msg" class="text-center mt-4 font-semibold"></div>
            </div>
        </section>

        <hr class="border-gray-800 my-12" />
        
        <!-- 4. Help (Aide) - Simple Request form -->
        <section id="help" class="py-12">
            <h2>‚ùì Demande d'aide / Question</h2>
            <p class="muted mb-8">Posez vos questions √† l'√©quipe. Les r√©ponses s'afficheront ici.</p>

            <div class="grid lg:grid-cols-2 gap-8">
                <div class="card">
                    <h3>Poser une question</h3>
                    <form id="helpRequestForm" class="space-y-4">
                        <div>
                            <label for="help_pseudo" class="block mb-1 font-semibold">Votre Pseudo</label>
                            <input id="help_pseudo" required placeholder="Pseudo (pour recevoir la r√©ponse)">
                        </div>
                        <div>
                            <label for="help_question" class="block mb-1 font-semibold">Votre question</label>
                            <textarea id="help_question" required rows="3" placeholder="D√©crivez votre probl√®me ou votre question..."></textarea>
                        </div>
                        <button type="submit" class="btn w-full">Envoyer la Demande</button>
                        <div id="help_msg" class="text-center mt-3 font-semibold"></div>
                    </form>
                </div>
                
                <div class="card">
                    <h3>R√©ponses publiques</h3>
                    <div id="help_answers_list" class="list max-h-96 overflow-y-auto">
                        <p class="small muted text-center">Les r√©ponses de l'√©quipe appara√Ætront ici.</p>
                    </div>
                </div>
            </div>
        </section>

        <hr class="border-gray-800 my-12" />

        <!-- 5. Espace Admin (Admin Area) -->
        <section id="admin_area" class="py-12">
            <h2>üîê Espace Administrateur</h2>
            <p class="muted mb-8">Cet espace est r√©serv√© aux administrateurs. Veuillez vous connecter. (Astuce: **Ctrl+A** pour l'acc√®s rapide)</p>
            
            <!-- Admin Login Form -->
            <div id="admin_login" class="card max-w-md mx-auto mb-10">
                <h3 class="text-center">Connexion Admin</h3>
                <input id="admin_password" type="password" placeholder="Mot de passe" class="mb-4">
                <button id="admin_login_btn" class="btn w-full">Acc√©der</button>
                <div id="admin_login_msg" class="text-center mt-4 font-semibold text-red-400"></div>
                <p class="text-center small muted mt-4">Mot de passe standard : <span class="font-mono">89mLh21</span></p>
            </div>

            <!-- Admin Content (Hidden until login) -->
            <div id="admin_content" class="space-y-10" style="display:none;">

                <!-- B. Admin : gestion des points -->
                <div class="panel" id="adminPointsPanel">
                    <h3>Gestion des points</h3>
                    <p class="small muted mb-4">Ajustez manuellement les points pour un pseudo pr√©cis. Mise √† jour instantan√©e du classement.</p>
                    <input id="points_pseudo" placeholder="Pseudo exact (ex: ChillUser#1234)">
                    <input id="points_amount" type="number" placeholder="Nombre de points" value="10">
                    <div style="margin-top:12px" class="flex gap-4">
                        <button id="points_add" class="btn small flex-1">Ajouter</button>
                        <button id="points_remove" class="btn small ghost flex-1">Retirer</button>
                    </div>
                    <div id="points_msg" class="small muted text-center" style="margin-top:8px; min-height: 20px;"></div>
                </div>

                <!-- Gestion des Candidatures -->
                <div class="panel">
                    <h3>Candidatures re√ßues (<span id="app_count">0</span>)</h3>
                    <div id="adminApplications" class="list max-h-96 overflow-y-auto">
                        <p class="small muted text-center">Pas de candidatures en attente.</p>
                    </div>
                </div>

                <!-- Gestion des Demandes d'Aide -->
                <div class="panel">
                    <h3>Demandes d'Aide en attente (<span id="help_count">0</span>)</h3>
                    <div id="adminHelpRequests" class="list max-h-96 overflow-y-auto">
                        <p class="small muted text-center">Pas de demandes d'aide en attente.</p>
                    </div>
                </div>
                
                <!-- Terminal Python Pyodide -->
                <div class="panel">
                    <h3>üêç Terminal Python (Pyodide)</h3>
                    <p class="small muted mb-3">Ex√©cutez du code Python localement pour des tests ou des calculs.</p>
                    <div id="pyodide_status" class="small muted mb-3">Cliquez sur Initialiser pour charger Python.</div>
                    <button id="init_pyodide_btn" class="btn small mb-4">Initialiser Python</button>
                    <textarea id="python_code_input" rows="5" class="font-mono text-sm" placeholder="print('Hello Mecs Chills!')"></textarea>
                    <button id="run_python_btn" class="btn small mt-3 w-full">Ex√©cuter le code</button>
                    
                    <h4 class="mt-4 text-lg font-semibold">R√©sultat:</h4>
                    <pre id="python_output" class="bg-gray-800 p-3 rounded-lg text-sm overflow-x-auto h-24 whitespace-pre-wrap"></pre>
                </div>
                
                <!-- Bloc-notes Admin (lmc_ai_saved) -->
                <div class="panel">
                    <h3>Bloc-notes du Cr√©ateur</h3>
                    <p class="small muted mb-3">Vos notes sont sauvegard√©es automatiquement. (Utilise lmc_ai_saved)</p>
                    <textarea id="admin_note_input" rows="6" placeholder="√âcrivez vos id√©es ici..."></textarea>
                </div>

                <!-- Audit Log -->
                <div class="panel">
                    <h3>Journal d'Audit (500 derni√®res entr√©es)</h3>
                    <div id="audit_log_list" class="list max-h-64 overflow-y-scroll text-xs">
                        <!-- Logs charg√©s ici -->
                    </div>
                </div>

            </div>
        </section>

        <hr class="border-gray-800 my-12" />

        <!-- 6. Contact (Contact) -->
        <section id="contact" class="py-12">
            <h2>‚úâÔ∏è Contactez-nous</h2>
            <p class="muted mb-8">Pour toute suggestion ou demande de partenariat.</p>
            <div class="card max-w-xl mx-auto">
                <form id="contactForm">
                    <div class="space-y-4">
                        <div>
                            <label for="contact_name" class="block mb-1 font-semibold">Nom / Pseudo</label>
                            <input id="contact_name" required placeholder="Votre Nom">
                        </div>
                        <div>
                            <label for="contact_email" class="block mb-1 font-semibold">Email</label>
                            <input id="contact_email" type="email" required placeholder="Votre Email">
                        </div>
                        <div>
                            <label for="contact_msg" class="block mb-1 font-semibold">Message</label>
                            <textarea id="contact_msg" required rows="4" placeholder="Votre message..."></textarea>
                        </div>
                        <button type="submit" class="btn w-full mt-4">Envoyer le Message</button>
                    </div>
                </form>
                <div id="contact_msg_result" class="text-center mt-4 font-semibold"></div>
            </div>
        </section>

    </main>
    
    <footer class="text-center py-6 border-t border-gray-800 mt-12">
        <p class="small muted">&copy; 2025 Les Mecs Chills. Propuls√© par la puissance du localStorage.</p>
    </footer>

    <!-- C. Modal / mini-page secr√®te ouverte par Ctrl+A -->
    <div id="secretOverlay" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.85);z-index:9999;align-items:center;justify-content:center" aria-modal="true" role="dialog" aria-labelledby="secretTitle">
        <div style="background:#071324;padding:24px;border-radius:12px;width:90%;max-width:520px;color:var(--text); box-shadow: 0 10px 20px rgba(0,0,0,0.5);">
            <h3 id="secretTitle" class="!mb-2">Acc√®s Cr√©ateur</h3>
            <p class="small muted">Entrez le code secret pour ouvrir le panneau cr√©ateur.</p>
            <input id="secretCodeInput" placeholder="Code secret" type="password" style="width:100%;margin-top:12px;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.08)" aria-label="Code secret" autocomplete="off">
            
            <div id="secret_msg" class="small muted text-center mt-3" style="min-height: 20px;"></div>

            <div style="display:flex;gap:8px;margin-top:12px">
                <button id="secretCodeSubmit" class="btn small flex-1">Valider</button>
                <button id="secretCodeCancel" class="btn small ghost flex-1">Annuler</button>
            </div>

            <div id="secretControls" style="display:none;margin-top:20px; padding-top: 15px; border-top: 1px dashed rgba(255,255,255,0.1);">
                <h4 class="text-lg font-semibold mb-3">Gestion rapide des points</h4>
                <input id="secret_pseudo" placeholder="Pseudo exact" aria-label="Pseudo pour points">
                <input id="secret_amount" type="number" placeholder="Montant" class="mt-2" value="10" aria-label="Montant de points">
                <div style="display:flex;gap:8px;margin-top:8px">
                    <button id="secret_add" class="btn small flex-1">+ Ajouter</button>
                    <button id="secret_remove" class="btn small ghost flex-1">- Retirer</button>
                </div>
                
                <!-- Musique & Pyodide -->
                <div style="margin-top:16px" class="space-y-3">
                    <h4 class="text-lg font-semibold mb-2">Contr√¥les additionnels</h4>
                    <div class="flex gap-4">
                         <button id="secret_play_music" class="btn small flex-1">‚ñ∂Ô∏è Musique</button>
                         <button id="secret_stop_music" class="btn small ghost flex-1">‚è∏ Stop</button>
                    </div>
                    <button id="secret_run_test_python" class="btn small ghost w-full">üêç Executer un test Pyodide</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Tout le JavaScript (Logique, Helpers, Pyodide, Listeners) -->
    <script>
        // =======================================================
        // 1. HELPERS & LOCALSTORAGE MANAGEMENT
        // =======================================================

        /**
         * R√©cup√®re et parse un objet du localStorage.
         * @param {string} k Cl√© localStorage.
         * @param {*} def Valeur par d√©faut si non trouv√© ou erreur.
         * @returns {*}
         */
        function lget(k, def) {
            try {
                const r = localStorage.getItem(k);
                return r ? JSON.parse(r) : def;
            } catch (e) {
                console.error(`Erreur lget(${k})`, e);
                return def;
            }
        }

        /**
         * Stocke et JSON.stringify un objet dans le localStorage.
         * @param {string} k Cl√© localStorage.
         * @param {*} v Valeur √† stocker.
         * @returns {boolean}
         */
        function lset(k, v) {
            try {
                localStorage.setItem(k, JSON.stringify(v));
                return true;
            } catch (e) {
                console.error(`Erreur lset(${k})`, e);
                return false;
            }
        }

        /**
         * G√©n√®re un horodatage format√© (YYYY-MM-DD HH:MM).
         * @returns {string}
         */
        function now() {
            return (new Date()).toISOString().replace('T', ' ').slice(0, 16);
        }

        /**
         * √âchappe les caract√®res HTML sp√©ciaux.
         * @param {string} s Cha√Æne √† √©chapper.
         * @returns {string}
         */
        function esc(s) {
            if (s == null) return '';
            return String(s).replace(/[&<>"']/g, ch => ({
                '&': '&amp;',
                '<': '&lt;',
                '>': '&gt;',
                '"': '&quot;',
                "'": '&#39;'
            }[ch]));
        }

        /**
         * Ajoute une entr√©e au journal d'audit (lmc_audit).
         * @param {string} type Type de l'action (e.g., 'points', 'application').
         * @param {string} message Description de l'action.
         */
        function auditLog(type, message) {
            const logs = lget('lmc_audit', []);
            logs.unshift({
                time: now(),
                type,
                message
            });
            lset('lmc_audit', logs.slice(0, 500));
            if (document.getElementById('audit_log_list') && isUserAdmin()) {
                 renderAuditLog(); // Update log if admin panel is open
            }
        }

        // =======================================================
        // 2. POINTS & LEADERBOARD LOGIC
        // =======================================================

        /** @returns {object<string, number>} */
        function getPointsMap() {
            return lget('lmc_points', {});
        }

        /** @param {object<string, number>} m */
        function setPointsMap(m) {
            lset('lmc_points', m);
        }

        /**
         * Ajoute un montant de points √† un pseudo.
         * @param {string} pseudo 
         * @param {number} amount 
         * @returns {boolean}
         */
        function addPointsToPseudo(pseudo, amount) {
            if (!pseudo || !amount) return false;
            const map = getPointsMap();
            const cur = parseInt(map[pseudo] || 0, 10) || 0;
            map[pseudo] = cur + Number(amount);
            setPointsMap(map);
            auditLog('points_add', `+${amount} pts to ${pseudo} (Total: ${map[pseudo]})`);
            renderLeaderboard();
            return true;
        }

        /**
         * Retire un montant de points √† un pseudo (min 0).
         * @param {string} pseudo 
         * @param {number} amount 
         * @returns {boolean}
         */
        function removePointsFromPseudo(pseudo, amount) {
            if (!pseudo || !amount) return false;
            const map = getPointsMap();
            const cur = parseInt(map[pseudo] || 0, 10) || 0;
            const newTotal = Math.max(0, cur - Number(amount));
            map[pseudo] = newTotal;
            setPointsMap(map);
            auditLog('points_remove', `-${amount} pts from ${pseudo} (Total: ${newTotal})`);
            renderLeaderboard();
            return true;
        }

        /**
         * R√©cup√®re le classement tri√©.
         * @param {number} limit 
         * @returns {Array<{pseudo: string, points: number}>}
         */
        function getLeaderboard(limit = 50) {
            const map = getPointsMap();
            return Object.keys(map)
                .map(p => ({
                    pseudo: p,
                    points: map[p]
                }))
                .sort((a, b) => b.points - a.points)
                .slice(0, limit);
        }

        /**
         * Affiche le classement dans l'UI.
         */
        function renderLeaderboard() {
            const el = document.getElementById('leaderboard');
            if (!el) return;
            const list = getLeaderboard(100);

            if (list.length === 0) {
                el.innerHTML = '<div class="small muted text-center py-4">Aucun score enregistr√©. Jouez pour commencer !</div>';
                return;
            }

            el.innerHTML = list.map((r, i) => {
                const rankClass = i < 3 ? 'text-primary font-extrabold' : 'text-white font-semibold';
                const rankText = i === 0 ? 'üëë' : i === 1 ? 'ü•à' : i === 2 ? 'ü•â' : `${i + 1}.`;

                return `<div class="item">
                            <div class="flex items-center gap-3">
                                <span class="w-6 text-right ${rankClass}">${rankText}</span>
                                <strong class="truncate">${esc(r.pseudo)}</strong>
                            </div>
                            <div class="small muted">${r.points} pts</div>
                        </div>`;
            }).join('');
        }
        
        // =======================================================
        // 3. GAME LOGIC (RPS & GUESS)
        // =======================================================

        const rpsChoices = ['Pierre', 'Feuille', 'Ciseaux'];
        document.querySelectorAll('.rps_choice').forEach(button => {
            button.addEventListener('click', (e) => {
                const playerChoice = e.currentTarget.getAttribute('data-choice');
                const pseudo = document.getElementById('game_pseudo_input').value.trim() || 'Anon';
                const botChoice = rpsChoices[Math.floor(Math.random() * 3)];
                let resultText = '';
                let points = 0;

                if (playerChoice === botChoice) {
                    resultText = `√âgalit√© ! Le bot a choisi ${botChoice}. (0 pt)`;
                } else if (
                    (playerChoice === 'Pierre' && botChoice === 'Ciseaux') ||
                    (playerChoice === 'Feuille' && botChoice === 'Pierre') ||
                    (playerChoice === 'Ciseaux' && botChoice === 'Feuille')
                ) {
                    points = 3;
                    resultText = `üéâ Victoire ! Le bot a choisi ${botChoice}. (+${points} pts pour ${pseudo})`;
                    addPointsToPseudo(pseudo, points);
                } else {
                    resultText = `D√©faite ! Le bot a choisi ${botChoice}. (0 pt)`;
                }

                document.getElementById('rps_result').innerHTML = resultText;
            });
        });


        let guessTarget = Math.floor(Math.random() * 50) + 1;
        let guessAttempts = 5;

        function resetGuessGame() {
            guessTarget = Math.floor(Math.random() * 50) + 1;
            guessAttempts = 5;
            document.getElementById('guess_result').textContent = 'Nouvelle partie ! Devinez...';
            document.getElementById('guess_attempts').textContent = `Tentatives restantes: ${guessAttempts}`;
            document.getElementById('guess_submit').disabled = false;
        }

        document.getElementById('guess_submit').addEventListener('click', () => {
            const pseudo = document.getElementById('game_pseudo_input').value.trim() || 'Anon';
            const inputEl = document.getElementById('guess_input');
            const guess = parseInt(inputEl.value);
            const resultEl = document.getElementById('guess_result');
            const attemptsEl = document.getElementById('guess_attempts');

            if (isNaN(guess) || guess < 1 || guess > 50) {
                resultEl.textContent = 'Veuillez entrer un nombre valide entre 1 et 50.';
                return;
            }

            if (guessAttempts <= 0) {
                resultEl.textContent = `Partie termin√©e. Le nombre √©tait ${guessTarget}. Cliquez pour rejouer.`;
                document.getElementById('guess_submit').disabled = true;
                return;
            }

            guessAttempts--;
            attemptsEl.textContent = `Tentatives restantes: ${guessAttempts}`;

            if (guess === guessTarget) {
                const points = 5;
                resultEl.innerHTML = `üåü Bravo **${esc(pseudo)}** ! Vous avez trouv√© ${guessTarget} ! (+${points} pts)`;
                addPointsToPseudo(pseudo, points);
                document.getElementById('guess_submit').disabled = true;
                setTimeout(resetGuessGame, 3000); // Recommence apr√®s 3s
            } else if (guess < guessTarget) {
                resultEl.textContent = `Trop bas ! Essayez un nombre plus grand.`;
            } else {
                resultEl.textContent = `Trop haut ! Essayez un nombre plus petit.`;
            }

            if (guessAttempts === 0 && guess !== guessTarget) {
                resultEl.textContent = `Dommage ! Le nombre √©tait ${guessTarget}. Recommencez.`;
                document.getElementById('guess_submit').disabled = true;
                setTimeout(resetGuessGame, 3000); // Recommence apr√®s 3s
            }
            inputEl.value = '';
        });

        // Initialisation du jeu Devine le nombre
        resetGuessGame();


        // =======================================================
        // 4. FORMS / PERSISTENCE LOGIC
        // =======================================================
        let _isAdmin = false;
        
        /** @returns {boolean} */
        function isUserAdmin() {
            return _isAdmin;
        }
        
        /**
         * Toggle admin content visibility
         * @param {boolean} show 
         */
        function toggleAdminContent(show) {
            _isAdmin = show;
            const content = document.getElementById('admin_content');
            const login = document.getElementById('admin_login');
            if (!content || !login) return;
            
            if (show) {
                content.style.display = 'block';
                login.style.display = 'none';
                renderAdminData();
            } else {
                content.style.display = 'none';
                login.style.display = 'block';
            }
        }
        
        // Admin Login
        document.getElementById('admin_login_btn').addEventListener('click', () => {
            const password = document.getElementById('admin_password').value;
            const msgEl = document.getElementById('admin_login_msg');
            const correctPass = '89mLh21';

            if (password === correctPass) {
                msgEl.textContent = 'Connexion r√©ussie !';
                msgEl.classList.remove('text-red-400');
                msgEl.classList.add('text-green-400');
                toggleAdminContent(true);
                auditLog('admin_login', 'Admin connect√© via mot de passe principal.');
            } else {
                msgEl.textContent = 'Mot de passe incorrect.';
                msgEl.classList.add('text-red-400');
                msgEl.classList.remove('text-green-400');
                toggleAdminContent(false);
            }
        });


        // Candidature Form (Recruitment)
        document.getElementById('advancedApplyForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const pseudo = document.getElementById('apply_pseudo').value.trim();
            const age = parseInt(document.getElementById('apply_age').value, 10);
            const experience = document.getElementById('apply_experience').value.trim();
            const motivation = document.getElementById('apply_motivation').value.trim();
            const msgEl = document.getElementById('apply_msg');

            if (!pseudo || isNaN(age) || !experience || !motivation) {
                msgEl.textContent = 'Veuillez remplir tous les champs.';
                return;
            }

            const arr = lget('lmc_applications', []);
            arr.unshift({
                // Using Date.now().toString(36) as requested in the instructions snippet
                id: Date.now().toString(36), 
                pseudo: pseudo,
                age: age,
                experience: experience,
                hours: 0, // Simplified, using 0 for hours since input was removed
                motivation: motivation,
                date: now()
            });

            lset('lmc_applications', arr);
            auditLog('application', `Nouvelle candidature de ${pseudo}`);
            msgEl.textContent = '‚úÖ Candidature envoy√©e ! Les admins la verront bient√¥t.';
            e.target.reset();
            renderAdminData();
        });


        // Contact Form
        document.getElementById('contactForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const name = document.getElementById('contact_name').value.trim();
            const email = document.getElementById('contact_email').value.trim();
            const msg = document.getElementById('contact_msg').value.trim();
            const msgEl = document.getElementById('contact_msg_result');

            if (!name || !email || !msg) {
                msgEl.textContent = 'Veuillez remplir tous les champs.';
                return;
            }

            const arr = lget('lmc_contacts', []);
            arr.unshift({
                name: name,
                email: email,
                msg: msg,
                date: now()
            });

            lset('lmc_contacts', arr);
            auditLog('contact', `Nouveau message de contact de ${name}`);
            msgEl.textContent = '‚úÖ Message envoy√© ! Merci de nous avoir contact√©s.';
            e.target.reset();
        });
        
        // Help Request Form
        document.getElementById('helpRequestForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const pseudo = document.getElementById('help_pseudo').value.trim();
            const question = document.getElementById('help_question').value.trim();
            const msgEl = document.getElementById('help_msg');

            if (!pseudo || !question) {
                msgEl.textContent = 'Veuillez remplir votre pseudo et votre question.';
                return;
            }

            const arr = lget('lmc_helpRequests', []);
            arr.unshift({
                id: crypto.randomUUID(),
                pseudo: pseudo,
                question: question,
                date: now(),
                answer: null // Admin will fill this
            });

            lset('lmc_helpRequests', arr);
            auditLog('help_request', `Nouvelle demande d'aide de ${pseudo}`);
            msgEl.textContent = '‚úÖ Votre demande a √©t√© enregistr√©e. Revenez bient√¥t pour la r√©ponse.';
            e.target.reset();
            renderAdminData();
        });

        // =======================================================
        // 5. ADMIN UI RENDERING & ACTIONS
        // =======================================================
        
        /**
         * Rendu des r√©ponses publiques aux demandes d'aide.
         */
        function renderHelpAnswers() {
            const el = document.getElementById('help_answers_list');
            if (!el) return;
            const requests = lget('lmc_helpRequests', []).filter(r => r.answer);

            if (requests.length === 0) {
                el.innerHTML = '<p class="small muted text-center py-4">L\'√©quipe n\'a pas encore r√©pondu aux questions.</p>';
                return;
            }

            el.innerHTML = requests.map(r => `
                <div class="item flex-col items-start gap-1 p-3">
                    <div class="font-semibold text-primary">Q: ${esc(r.question)}</div>
                    <div class="small muted italic">par ${esc(r.pseudo)} le ${r.date.slice(0, 10)}</div>
                    <div class="mt-2 p-2 bg-gray-800 rounded-lg w-full">
                       <span class="font-bold text-green-400">R:</span> ${esc(r.answer)}
                    </div>
                </div>
            `).join('');
        }

        /**
         * Rendu du journal d'audit.
         */
        function renderAuditLog() {
            const el = document.getElementById('audit_log_list');
            if (!el) return;
            const logs = lget('lmc_audit', []);
            
            el.innerHTML = logs.map(log => `
                <div class="item flex-col items-start py-1">
                    <span class="font-mono text-xs text-gray-400">${log.time.split(' ')[1]}</span>
                    <span class="text-xs ${log.type.includes('error') ? 'text-red-400' : 'text-primary'} font-semibold">${log.type.toUpperCase()}</span>
                    <span class="text-xs text-gray-300">${esc(log.message)}</span>
                </div>
            `).join('');
        }


        /**
         * Rendu des donn√©es admin (applications, help requests) dans le panneau.
         */
        function renderAdminData() {
            if (!isUserAdmin()) return;
            
            // 1. Candidatures (Applications)
            const appEl = document.getElementById('adminApplications');
            const appCountEl = document.getElementById('app_count');
            const apps = lget('lmc_applications', []);
            appCountEl.textContent = apps.length;

            if (apps.length === 0) {
                appEl.innerHTML = '<p class="small muted text-center py-4">Pas de candidatures en attente.</p>';
            } else {
                appEl.innerHTML = apps.map(app => `
                    <div class="item flex-col items-start gap-2 p-3 border border-gray-700 rounded-lg mb-3">
                        <div class="font-bold text-lg">${esc(app.pseudo)} (${app.age} ans)</div>
                        <div class="small muted w-full">ID: ${app.id} | Re√ßu: ${app.date.split(' ')[0]}</div>
                        <p class="small"><span class="font-semibold text-primary">Exp√©rience:</span> ${esc(app.experience)}</p>
                        <p class="small"><span class="font-semibold text-primary">Motivation:</span> ${esc(app.motivation)}</p>
                        <button class="btn small ghost text-red-400 delete-app-btn" data-id="${app.id}">
                            <i class="fas fa-trash-alt mr-1"></i> Supprimer
                        </button>
                    </div>
                `).join('');
                
                // Add delete listeners
                appEl.querySelectorAll('.delete-app-btn').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const id = e.currentTarget.getAttribute('data-id');
                        if (window.confirm('Voulez-vous vraiment supprimer cette candidature ?')) {
                            let currentApps = lget('lmc_applications', []);
                            const appIndex = currentApps.findIndex(a => a.id === id);
                            if (appIndex !== -1) {
                                const pseudo = currentApps[appIndex].pseudo;
                                currentApps.splice(appIndex, 1);
                                lset('lmc_applications', currentApps);
                                auditLog('app_delete', `Candidature ${id} de ${pseudo} supprim√©e.`);
                                renderAdminData();
                            }
                        }
                    });
                });
            }
            
            // 2. Demandes d'Aide (Help Requests)
            const helpEl = document.getElementById('adminHelpRequests');
            const helpCountEl = document.getElementById('help_count');
            const requests = lget('lmc_helpRequests', []);
            helpCountEl.textContent = requests.filter(r => !r.answer).length;

            if (requests.length === 0) {
                helpEl.innerHTML = '<p class="small muted text-center py-4">Pas de demandes d\'aide en attente.</p>';
            } else {
                helpEl.innerHTML = requests.map(r => `
                    <div class="item flex-col items-start gap-2 p-3 border ${r.answer ? 'border-green-600' : 'border-red-600'} rounded-lg mb-3">
                        <div class="font-bold">${esc(r.pseudo)} - <span class="small muted">${r.date.split(' ')[0]}</span></div>
                        <p class="small">${esc(r.question)}</p>
                        ${r.answer ? 
                            `<div class="small text-green-400">‚úÖ R√©pondu: ${esc(r.answer)}</div>` : 
                            `<textarea id="answer_${r.id}" rows="2" placeholder="R√©ponse de l'admin..." class="w-full mt-2 text-sm"></textarea>
                             <button class="btn small answer-help-btn mt-2" data-id="${r.id}">R√©pondre & Publier</button>`}
                    </div>
                `).join('');
                
                // Add answer listeners
                helpEl.querySelectorAll('.answer-help-btn').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const id = e.currentTarget.getAttribute('data-id');
                        const answerEl = document.getElementById(`answer_${id}`);
                        const answerText = answerEl.value.trim();
                        
                        if (answerText.length < 5) {
                            alert('La r√©ponse doit faire au moins 5 caract√®res.'); // Using alert here for simplicity in admin panel
                            return;
                        }

                        let currentRequests = lget('lmc_helpRequests', []);
                        const requestIndex = currentRequests.findIndex(r => r.id === id);
                        
                        if (requestIndex !== -1) {
                            currentRequests[requestIndex].answer = answerText;
                            lset('lmc_helpRequests', currentRequests);
                            auditLog('help_answer', `R√©pondu √† la demande ${id} de ${currentRequests[requestIndex].pseudo}.`);
                            renderAdminData();
                            renderHelpAnswers(); // Update public list
                        }
                    });
                });
            }
            
            // 3. Admin Note (lmc_ai_saved)
            const noteEl = document.getElementById('admin_note_input');
            if(noteEl) {
                const savedNote = lget('lmc_ai_saved', {text: '', date: now()}).text;
                if(noteEl.value === '') noteEl.value = savedNote;
            }
            
            // 4. Audit Log
            renderAuditLog();
        }

        // Auto-save Admin Note
        document.getElementById('admin_note_input')?.addEventListener('input', (e) => {
            lset('lmc_ai_saved', { text: e.target.value, date: now() });
        });
        
        // Admin Points Listeners
        document.getElementById('points_add')?.addEventListener('click', () => {
            const pseudo = document.getElementById('points_pseudo').value.trim();
            const amt = Number(document.getElementById('points_amount').value) || 0;
            const msgEl = document.getElementById('points_msg');
            
            if (!pseudo || !amt) {
                msgEl.textContent = 'Pseudo + montant requis';
                return;
            }
            if (addPointsToPseudo(pseudo, amt)) {
                msgEl.textContent = `‚úÖ +${amt} pts √† ${pseudo} !`;
                document.getElementById('points_pseudo').value = '';
                document.getElementById('points_amount').value = '10';
            }
        });
        
        document.getElementById('points_remove')?.addEventListener('click', () => {
            const pseudo = document.getElementById('points_pseudo').value.trim();
            const amt = Number(document.getElementById('points_amount').value) || 0;
            const msgEl = document.getElementById('points_msg');

            if (!pseudo || !amt) {
                msgEl.textContent = 'Pseudo + montant requis';
                return;
            }
            if (removePointsFromPseudo(pseudo, amt)) {
                msgEl.textContent = `‚úÖ ${amt} pts retir√©s √† ${pseudo} !`;
                document.getElementById('points_pseudo').value = '';
                document.getElementById('points_amount').value = '10';
            }
        });


        // =======================================================
        // 6. PYODIDE INTEGRATION (Python Terminal)
        // =======================================================

        let pyodide = null;
        let pyodideLoaded = false;

        async function initPyodide() {
            if (pyodideLoaded) return pyodide;
            
            const statusEl = document.getElementById('pyodide_status');
            if (statusEl) statusEl.textContent = 'Chargement Python (Pyodide)...';
            
            try {
                // @ts-ignore
                pyodide = await loadPyodide({
                    indexURL: "https://cdn.jsdelivr.net/pyodide/v0.23.4/full/"
                });
                pyodideLoaded = true;
                if (statusEl) statusEl.textContent = 'üêç Python pr√™t !';
                document.getElementById('init_pyodide_btn').style.display = 'none';
                return pyodide;
            } catch (e) {
                console.error('Erreur Pyodide:', e);
                if (statusEl) statusEl.textContent = '‚ùå Erreur de chargement Python.';
                return null;
            }
        }

        async function runPython(code, outputId = 'python_output') {
            const outputEl = document.getElementById(outputId);
            if (!pyodideLoaded) {
                outputEl.textContent = 'Veuillez d\'abord initialiser Python.';
                return;
            }
            
            outputEl.textContent = '... Ex√©cution en cours ...';
            
            try {
                // Rediriger la sortie standard vers une fonction JS
                pyodide.runPython('import sys');
                pyodide.runPython(`sys.stdout.write = lambda msg: __js_output_buffer.append(msg)`);
                const outputBuffer = [];
                // @ts-ignore
                pyodide.globals.set('__js_output_buffer', outputBuffer);

                const res = await pyodide.runPythonAsync(code);
                
                // Afficher le r√©sultat (stdout + valeur de retour)
                let finalOutput = outputBuffer.join('');
                if (res !== undefined && res !== null) {
                    finalOutput += `\n>>> ${String(res)}`;
                }
                
                outputEl.textContent = finalOutput.trim();
                console.log('Pyodide Result:', res);
                auditLog('pyodide_run', `Code ex√©cut√©. R√©sultat: ${String(res).slice(0, 50)}`);

                return res;
            } catch (e) {
                outputEl.textContent = `ERREUR PYTHON:\n${e}`;
                console.error('Erreur Python:', e);
                auditLog('pyodide_error', `Erreur: ${String(e).slice(0, 100)}`);
                return null;
            }
        }
        
        // Listener pour le bouton Init Pyodide
        document.getElementById('init_pyodide_btn')?.addEventListener('click', initPyodide);

        // Listener pour le bouton Run Python
        document.getElementById('run_python_btn')?.addEventListener('click', () => {
            const code = document.getElementById('python_code_input').value;
            runPython(code);
        });

        // =======================================================
        // 7. CTRL+A SECRET OVERLAY
        // =======================================================

        let secretAudio = null;

        function ensureSecretAudio() {
            if (!secretAudio) {
                // Utilisation d'un asset local. L'utilisateur doit s'assurer que le chemin est correct.
                secretAudio = new Audio('/assets/music/musique.mp3'); 
                secretAudio.loop = true;
            }
        }
        
        // Ctrl+A secret overlay
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && (e.key === 'a' || e.key === 'A')) {
                e.preventDefault();
                const overlay = document.getElementById('secretOverlay');
                if (overlay) {
                    overlay.style.display = 'flex';
                    // Focus management
                    const codeInput = document.getElementById('secretCodeInput');
                    codeInput.value = '';
                    codeInput.focus();
                }
                document.getElementById('secretControls').style.display = 'none';
                document.getElementById('secret_msg').textContent = '';
            }
        });

        document.getElementById('secretCodeCancel')?.addEventListener('click', () => {
            document.getElementById('secretOverlay').style.display = 'none';
        });

        document.getElementById('secretCodeSubmit')?.addEventListener('click', () => {
            const code = document.getElementById('secretCodeInput').value.trim();
            const msgEl = document.getElementById('secret_msg');
            if (code === '56710') { // code secret
                document.getElementById('secretControls').style.display = 'block';
                msgEl.textContent = '‚úÖ Acc√®s Cr√©ateur valid√© ! Bienvenue.';
                toggleAdminContent(true); // Grant full admin access
                auditLog('creator_login', 'Acc√®s Cr√©ateur via Ctrl+A/Code.');
            } else {
                msgEl.textContent = '‚ùå Code incorrect';
                document.getElementById('secretControls').style.display = 'none';
            }
        });

        // secret add/remove points (same logic as main admin panel)
        document.getElementById('secret_add')?.addEventListener('click', () => {
            const p = document.getElementById('secret_pseudo').value.trim();
            const amt = Number(document.getElementById('secret_amount').value) || 0;
            const msgEl = document.getElementById('secret_msg');
            
            if (!p || !amt) {
                msgEl.textContent = 'Pseudo + montant requis';
                return;
            }
            if (addPointsToPseudo(p, amt)) {
                msgEl.textContent = `‚úÖ +${amt} pts √† ${p}`;
            }
        });

        document.getElementById('secret_remove')?.addEventListener('click', () => {
            const p = document.getElementById('secret_pseudo').value.trim();
            const amt = Number(document.getElementById('secret_amount').value) || 0;
            const msgEl = document.getElementById('secret_msg');
            
            if (!p || !amt) {
                msgEl.textContent = 'Pseudo + montant requis';
                return;
            }
            if (removePointsFromPseudo(p, amt)) {
                msgEl.textContent = `‚úÖ -${amt} pts √† ${p}`;
            }
        });

        // Musique quick control
        document.getElementById('secret_play_music')?.addEventListener('click', () => {
            ensureSecretAudio();
            const msgEl = document.getElementById('secret_msg');
            secretAudio.play().then(() => {
                msgEl.textContent = 'üé∂ Musique lanc√©e !';
            }).catch(() => {
                msgEl.textContent = 'Impossible de jouer la musique (interaction navigateur requise).';
            });
        });

        document.getElementById('secret_stop_music')?.addEventListener('click', () => {
            if (secretAudio) {
                secretAudio.pause();
                secretAudio.currentTime = 0;
                document.getElementById('secret_msg').textContent = '‚è∏ Musique arr√™t√©e.';
            }
        });
        
        // Secret Pyodide Test button
        document.getElementById('secret_run_test_python')?.addEventListener('click', async () => {
            const code = "print('Test Pyodide OK: 10 * 10 =', 10 * 10)";
            const outputId = 'secret_msg'; // Remplacer le message de l'overlay
            const outputEl = document.getElementById(outputId);
            outputEl.textContent = '... Chargement et ex√©cution Python ...';

            await runPython(code, outputId);
        });

        // =======================================================
        // 8. INITIALIZATION
        // =======================================================

        function initializeApp() {
            // Affichage initial
            renderLeaderboard();
            renderHelpAnswers();
            
            // Masquer le contenu admin au d√©marrage
            toggleAdminContent(false); 
            
            // Mobile menu toggle
            document.getElementById('menu-toggle').addEventListener('click', () => {
                const mobileMenu = document.getElementById('mobile-menu');
                mobileMenu.classList.toggle('hidden');
            });
            
            // Close mobile menu on link click
            document.querySelectorAll('#mobile-menu a').forEach(link => {
                link.addEventListener('click', () => {
                    document.getElementById('mobile-menu').classList.add('hidden');
                });
            });

            // Initialisez les fausses donn√©es d'annonces si besoin
            let announcements = lget('lmc_announcements', [{
                title: "Lancement du site !",
                text: "Bienvenue sur la plateforme Les Mecs Chills. Explorez les jeux et postulez !",
                date: now()
            }]);
            lset('lmc_announcements', announcements);
            document.getElementById('announcements_list').innerHTML = announcements.map(a => `
                <div class="item">
                    <div>
                        <strong>${esc(a.title)}</strong> 
                        <div class="small muted">${esc(a.text)}</div>
                    </div>
                    <div class="small muted">${a.date.split(' ')[0]}</div>
                </div>
            `).join('');

        }

        window.onload = initializeApp;
    </script>
</body>
</html>
